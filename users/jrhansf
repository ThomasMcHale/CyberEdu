{
    "current_scene": {
        "img_no": 0,
        "buttons": [
            {
                "x1": 207,
                "y1": 127,
                "x2": 282,
                "y2": 281,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(\"Manager\", \"Do you know who did it?\", function () { \r\n\t\t\tsay(\"\", \"Click on the person responsible for these crimes!\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(true);\r\n\t\tglobals.suspect2.setEnabled(true);\r\n\t\tglobals.culprit.setEnabled(true);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, ma'am. We are the detectives you called for. Do you have any leads?\", function() { \r\n\t\t\tsay(\"Manager\", \"The guy in the suit with a top hat, the guy in the light blue shirt in the back corner, and the girl in a red shirt sitting at the counter all reported to me that they had been robbed after leaving \" +\r\n\t\t\t\t\"here.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"Let's go talk to the victims, \" + globals.player_name + \".\", closeDialogue());\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.manager.setEnabled(false);\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 12",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 763,
                "y1": 174,
                "x2": 792,
                "y2": 224,
                "action": "function () { \r\n\tsay(globals.player_name, \"Good morning. I'm a detective investigating the robberies that have been occurring here. What can you tell me?\", function () {\r\n\t\tsay(\"Shorts\", \"I ordered Halloween decorations for my house online through amazon.com, using a credit card, last week while sitting in this cafe. The tracking on the package said that the decorations had indeed shipped, \" +\r\n\t\t\"and are in a warehouse in Clarksville, Maryland, and probably will be delivered in one or two days. I used my card once in the grocery store since then, but on my credit card bill I noticed that there was also a charge \" +\r\n\t\t\"for a laptop battery on it as well. I just found out today and I'll contact the credit card company once the customer service line opens up.\", closeDialogue()); \r\n\t});\r\n\tglobals.spoken_to_witness1 = true; \r\n\tglobals.witness1.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 13",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 884,
                "y1": 207,
                "x2": 919,
                "y2": 230,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello. I'm a detective investigating the robberies that happened here. Do you have any information that could help me?\", function () { \r\n\t\tsay(\"White Pants\", \"I was in a hurry coming into work yesterday and did not have time to pay my credit card bill at my house. Since I cannot live without my morning coffee, I came here and paid my bill online. The \" +\r\n\t\t\t\"payment was successfully received, but that afternoon, when I went to the ATM to withdraw some cash, I found that my bank account balance, which should have been $342, was 0. I then went to the bank for a statement \" +\r\n\t\t\t\"to see if there had been a mistake. The statement showed someone electronically withdrew the $342 I had, and transferred the money to a Capital One bank account.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness2 = true; \r\n\tglobals.witness2.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 14",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 411,
                "y1": 158,
                "x2": 473,
                "y2": 363,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello, I'm a detective investigating the robberies here. Do you know anything \" +\r\n\t\t\"about them?\", function () {\r\n\t\tsay(\"Black Shirt\", \"I have not been robbed. I've never used a computer in here before, so I \" +\r\n\t\t\t\"think that the robberies have something to do with people's computers.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness3 = true;\r\n\tglobals.witness3.setEnabled(false);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 15",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 622,
                "y1": 238,
                "x2": 694,
                "y2": 310,
                "action": "function () { \r\n\tsay(globals.player_name, \"Hello, sir. I'm a detective investigating the robberies that happened here. Can you tell me anything about what happened to you?\", function () { \r\n\t\tsay(\"Top Hat\", \"Two days ago, I was here, browsing the internet on my laptop looking for top hats, because I need one for my role as Abraham Lincoln in the theatre production I am a part of. I purchased one online from\" +\r\n\t\t\t\" amazon.com, using a credit card. The purchase itself was not a scam, for the top hat did arrive as promised. I'm wearing it now. I haven't made any other purchases with the card since, so I am pretty sure my card\" +\r\n\t\t\t\" information was stolen here. Whoever has my card number used it to purchase a USB mouse. I cancelled that card but I couldn't remove my liability from the mouse purchase.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_tophat = true; \r\n\tglobals.tophat.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 16",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 771,
                "y1": 341,
                "x2": 884,
                "y2": 456,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the red shirt is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Red Shirt\", \"Huh? I haven't robbed anyone.\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"This guy's innocent, \" + globals.player_name + \". You got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, I'm investigating robberies that have been occurring here recently. Have  you heard anything about them?\", function () { \r\n\t\t\tsay(\"Red shirt\", \"No, I've never been robbed here. I'm not using the internet. I've come here for inspiration to attempt to start writing a book.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect1 = true; \r\n\t\tglobals.suspect1.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 17",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1199,
                "y1": 213,
                "x2": 1269,
                "y2": 267,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the gray suit is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Gray Suit\", \"What! I didn't do it! I swear!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Mmm. I don't see anything malicious. I think you got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect2.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"I'm investigating the robberies here. Do you have any information about them?\", function () { \r\n\t\t\tsay(\"Gray Suit\", \"I've never been robbed here. I don't come here often. I'm just looking at cat pictures on the internet. Isn't this the cutest cat you ever saw.\", function () { \r\n\t\t\t\tsay(globals.partner_name, \"No. That's an ugly looking cat.\", function () { \r\n\t\t\t\t\tdialogue(\"Gray Suit\", \"How dare you! That's the second cutest cat in the world, second to mine! What about you. What do you think?\", [\r\n\t\t\t\t\t\t[\"It's cute\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Yes, it is a pretty cute cat\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You've got a good sense for cat cuteness. I'm glad you agree with me.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"It's ugly\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I agree with \" + globals.partner_name + \". That cat is ugly\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You guys don't know what your talking about when it comes to cats.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"Unsure\", function () { \r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I don't know. Ask me on another day.\", closeDialogue());\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect2 = true;\r\n\t\tglobals.suspect2.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 18",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 972,
                "y1": 293,
                "x2": 1036,
                "y2": 363,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.player_name, \"The man in the blue shoes is responsible.\", function () { \r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Blue Shoes\", \"I swear I'm innocent!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Well, the processes running on your PC show otherwise. You're downloading all the traffic from the Wi-Fi onto your computer! You're under arrest for fraud and robbery. You have the \" +\r\n\t\t\t\t\t\t\t\"right to remain silent. Anything you say in court can and will be used against you. You have the right to an attorney. If you cannot afford one, one will be provided for you.\", function () {\r\n\t\t\t\t\t\t\tsay(\"Manager\", \"Why'd you do it?\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Blue Shoes\", \"I was fired two years ago by a Starbucks in Ohio. Since then, I've been wandering the country, and I'm running out of money. It was the only thing I could do.\", function () {\r\n\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"Thank you for your help, \" + globals.player_name + \" and \" + globals.partner_name + \". With the robber in custody, I'll be able to resume business as usual again. I'll post a notice \" +\r\n\t\t\t\t\t\t\t\t\t\"regarding the risk of using my public network for financial transactions. \", function () {\r\n\t\t\t\t\t\t\t\t\t\tsay(\"Shorts\", \"Yeah, thanks guys! I had no idea that wireless network connections could be easily intercepted, even if the website itself is secure. I won't by anything on a public \" +\r\n\t\t\t\t\t\t\t\t\t\t\"network again.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"For your help, I am pleased to offer you both a $\" + (30-10*globals.incorrect_guesses) + \" gift certificate. Please accept it as a token of my thanks.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.partner_name, \"Thank you very much, ma'am.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"Thanks a lot.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene: \"coffee_shop\", score: 30-10*globals.incorrect_guesses });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.goToCoffeeShopButton.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplay_video(\"wifisniff\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.culprit.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, sir. I'm working on a case involving robberies at this cafe. Do you know anything pertinent to that matter?\", function () { \r\n\t\t\tsay(\"Blue Shoes\", \"No, I don't. I've never been robbed here. I just lost my job in Cincinnati, and I came here. I'm playing Words with Friends while I wait for job application responses.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_culprit = true;\r\n\t\tglobals.culprit.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 19",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { \r\n\tif (!globals.entry_message_shown) {\r\n\t\tsay(globals.partner_name, \"Let's speak to the manager and let her know we are here. She's behind the counter.\", function () { \r\n\t\t\tglobals.entry_message_shown = true; \r\n\t\t\tcloseDialogue(); \r\n\t\t\t// Delaying adding the buttons until after the entry message is shown. This prevents people from skipping it by double clicking \r\n\t\t\t// on the \"Go to the Coffee Shop button\", which triggers the top hat's dialogue, because they are in the same position on the screen.\r\n\t\t\tglobals.coffee_shop.addButton(globals.manager);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness3);\r\n\t\t\tglobals.coffee_shop.addButton(globals.tophat);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.culprit);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\telse if (globals.entry_message_shown && !globals.spoken_to_all_witnesses && globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && (!globals.spoken_to_suspect1 || !globals.spoken_to_suspect2 || !globals.spoken_to_culprit)) {\r\n\t\tsay(globals.partner_name, \"Let's interview everyone else in here we haven't yet, they might have information or be the one responsible for these robberies.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t}\r\n\telse if (globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && globals.spoken_to_witness3 && globals.spoken_to_suspect1 && globals.spoken_to_suspect2 && globals.spoken_to_culprit && !globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.partner_name, \"Let's talk to the manager and tell him who did it.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t\tglobals.spoken_to_all_suspects = true;\r\n\t\tglobals.manager.setEnabled(true);\r\n\t}\r\n}",
        "object_id": "Scene 11",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "previous_world_scene": {
        "img_no": 0,
        "buttons": [
            {
                "x1": 207,
                "y1": 127,
                "x2": 282,
                "y2": 281,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(\"Manager\", \"Do you know who did it?\", function () { \r\n\t\t\tsay(\"\", \"Click on the person responsible for these crimes!\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(true);\r\n\t\tglobals.suspect2.setEnabled(true);\r\n\t\tglobals.culprit.setEnabled(true);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, ma'am. We are the detectives you called for. Do you have any leads?\", function() { \r\n\t\t\tsay(\"Manager\", \"The guy in the suit with a top hat, the guy in the light blue shirt in the back corner, and the girl in a red shirt sitting at the counter all reported to me that they had been robbed after leaving \" +\r\n\t\t\t\t\"here.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"Let's go talk to the victims, \" + globals.player_name + \".\", closeDialogue());\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.manager.setEnabled(false);\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 12",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 763,
                "y1": 174,
                "x2": 792,
                "y2": 224,
                "action": "function () { \r\n\tsay(globals.player_name, \"Good morning. I'm a detective investigating the robberies that have been occurring here. What can you tell me?\", function () {\r\n\t\tsay(\"Shorts\", \"I ordered Halloween decorations for my house online through amazon.com, using a credit card, last week while sitting in this cafe. The tracking on the package said that the decorations had indeed shipped, \" +\r\n\t\t\"and are in a warehouse in Clarksville, Maryland, and probably will be delivered in one or two days. I used my card once in the grocery store since then, but on my credit card bill I noticed that there was also a charge \" +\r\n\t\t\"for a laptop battery on it as well. I just found out today and I'll contact the credit card company once the customer service line opens up.\", closeDialogue()); \r\n\t});\r\n\tglobals.spoken_to_witness1 = true; \r\n\tglobals.witness1.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 13",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 884,
                "y1": 207,
                "x2": 919,
                "y2": 230,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello. I'm a detective investigating the robberies that happened here. Do you have any information that could help me?\", function () { \r\n\t\tsay(\"White Pants\", \"I was in a hurry coming into work yesterday and did not have time to pay my credit card bill at my house. Since I cannot live without my morning coffee, I came here and paid my bill online. The \" +\r\n\t\t\t\"payment was successfully received, but that afternoon, when I went to the ATM to withdraw some cash, I found that my bank account balance, which should have been $342, was 0. I then went to the bank for a statement \" +\r\n\t\t\t\"to see if there had been a mistake. The statement showed someone electronically withdrew the $342 I had, and transferred the money to a Capital One bank account.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness2 = true; \r\n\tglobals.witness2.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 14",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 411,
                "y1": 158,
                "x2": 473,
                "y2": 363,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello, I'm a detective investigating the robberies here. Do you know anything \" +\r\n\t\t\"about them?\", function () {\r\n\t\tsay(\"Black Shirt\", \"I have not been robbed. I've never used a computer in here before, so I \" +\r\n\t\t\t\"think that the robberies have something to do with people's computers.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness3 = true;\r\n\tglobals.witness3.setEnabled(false);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 15",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 622,
                "y1": 238,
                "x2": 694,
                "y2": 310,
                "action": "function () { \r\n\tsay(globals.player_name, \"Hello, sir. I'm a detective investigating the robberies that happened here. Can you tell me anything about what happened to you?\", function () { \r\n\t\tsay(\"Top Hat\", \"Two days ago, I was here, browsing the internet on my laptop looking for top hats, because I need one for my role as Abraham Lincoln in the theatre production I am a part of. I purchased one online from\" +\r\n\t\t\t\" amazon.com, using a credit card. The purchase itself was not a scam, for the top hat did arrive as promised. I'm wearing it now. I haven't made any other purchases with the card since, so I am pretty sure my card\" +\r\n\t\t\t\" information was stolen here. Whoever has my card number used it to purchase a USB mouse. I cancelled that card but I couldn't remove my liability from the mouse purchase.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_tophat = true; \r\n\tglobals.tophat.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 16",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 771,
                "y1": 341,
                "x2": 884,
                "y2": 456,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the red shirt is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Red Shirt\", \"Huh? I haven't robbed anyone.\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"This guy's innocent, \" + globals.player_name + \". You got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, I'm investigating robberies that have been occurring here recently. Have  you heard anything about them?\", function () { \r\n\t\t\tsay(\"Red shirt\", \"No, I've never been robbed here. I'm not using the internet. I've come here for inspiration to attempt to start writing a book.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect1 = true; \r\n\t\tglobals.suspect1.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 17",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1199,
                "y1": 213,
                "x2": 1269,
                "y2": 267,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the gray suit is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Gray Suit\", \"What! I didn't do it! I swear!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Mmm. I don't see anything malicious. I think you got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect2.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"I'm investigating the robberies here. Do you have any information about them?\", function () { \r\n\t\t\tsay(\"Gray Suit\", \"I've never been robbed here. I don't come here often. I'm just looking at cat pictures on the internet. Isn't this the cutest cat you ever saw.\", function () { \r\n\t\t\t\tsay(globals.partner_name, \"No. That's an ugly looking cat.\", function () { \r\n\t\t\t\t\tdialogue(\"Gray Suit\", \"How dare you! That's the second cutest cat in the world, second to mine! What about you. What do you think?\", [\r\n\t\t\t\t\t\t[\"It's cute\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Yes, it is a pretty cute cat\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You've got a good sense for cat cuteness. I'm glad you agree with me.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"It's ugly\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I agree with \" + globals.partner_name + \". That cat is ugly\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You guys don't know what your talking about when it comes to cats.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"Unsure\", function () { \r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I don't know. Ask me on another day.\", closeDialogue());\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect2 = true;\r\n\t\tglobals.suspect2.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 18",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 972,
                "y1": 293,
                "x2": 1036,
                "y2": 363,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.player_name, \"The man in the blue shoes is responsible.\", function () { \r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Blue Shoes\", \"I swear I'm innocent!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Well, the processes running on your PC show otherwise. You're downloading all the traffic from the Wi-Fi onto your computer! You're under arrest for fraud and robbery. You have the \" +\r\n\t\t\t\t\t\t\t\"right to remain silent. Anything you say in court can and will be used against you. You have the right to an attorney. If you cannot afford one, one will be provided for you.\", function () {\r\n\t\t\t\t\t\t\tsay(\"Manager\", \"Why'd you do it?\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Blue Shoes\", \"I was fired two years ago by a Starbucks in Ohio. Since then, I've been wandering the country, and I'm running out of money. It was the only thing I could do.\", function () {\r\n\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"Thank you for your help, \" + globals.player_name + \" and \" + globals.partner_name + \". With the robber in custody, I'll be able to resume business as usual again. I'll post a notice \" +\r\n\t\t\t\t\t\t\t\t\t\"regarding the risk of using my public network for financial transactions. \", function () {\r\n\t\t\t\t\t\t\t\t\t\tsay(\"Shorts\", \"Yeah, thanks guys! I had no idea that wireless network connections could be easily intercepted, even if the website itself is secure. I won't by anything on a public \" +\r\n\t\t\t\t\t\t\t\t\t\t\"network again.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"For your help, I am pleased to offer you both a $\" + (30-10*globals.incorrect_guesses) + \" gift certificate. Please accept it as a token of my thanks.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.partner_name, \"Thank you very much, ma'am.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"Thanks a lot.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene: \"coffee_shop\", score: 30-10*globals.incorrect_guesses });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.goToCoffeeShopButton.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplay_video(\"wifisniff\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.culprit.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, sir. I'm working on a case involving robberies at this cafe. Do you know anything pertinent to that matter?\", function () { \r\n\t\t\tsay(\"Blue Shoes\", \"No, I don't. I've never been robbed here. I just lost my job in Cincinnati, and I came here. I'm playing Words with Friends while I wait for job application responses.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_culprit = true;\r\n\t\tglobals.culprit.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 19",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { \r\n\tif (!globals.entry_message_shown) {\r\n\t\tsay(globals.partner_name, \"Let's speak to the manager and let her know we are here. She's behind the counter.\", function () { \r\n\t\t\tglobals.entry_message_shown = true; \r\n\t\t\tcloseDialogue(); \r\n\t\t\t// Delaying adding the buttons until after the entry message is shown. This prevents people from skipping it by double clicking \r\n\t\t\t// on the \"Go to the Coffee Shop button\", which triggers the top hat's dialogue, because they are in the same position on the screen.\r\n\t\t\tglobals.coffee_shop.addButton(globals.manager);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness3);\r\n\t\t\tglobals.coffee_shop.addButton(globals.tophat);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.culprit);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\telse if (globals.entry_message_shown && !globals.spoken_to_all_witnesses && globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && (!globals.spoken_to_suspect1 || !globals.spoken_to_suspect2 || !globals.spoken_to_culprit)) {\r\n\t\tsay(globals.partner_name, \"Let's interview everyone else in here we haven't yet, they might have information or be the one responsible for these robberies.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t}\r\n\telse if (globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && globals.spoken_to_witness3 && globals.spoken_to_suspect1 && globals.spoken_to_suspect2 && globals.spoken_to_culprit && !globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.partner_name, \"Let's talk to the manager and tell him who did it.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t\tglobals.spoken_to_all_suspects = true;\r\n\t\tglobals.manager.setEnabled(true);\r\n\t}\r\n}",
        "object_id": "Scene 11",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "worldButtonsEnabled": true,
    "diagUp": false,
    "MAX_X": 1280,
    "MAX_Y": 630,
    "dialogue_buttons": [],
    "CANVAS_X": 7.999999523162842,
    "CANVAS_Y": 7.999999523162842,
    "inventory_image": {},
    "click_sound": {},
    "phone_state": 1,
    "phone_screen": 11,
    "phone_software_installed": true,
    "phone_software_apps": [],
    "email_inbox": [
        {
            "subject": "TEST",
            "body": "TEST TEST a very long line here, trying to test the capability to draw multiple lines with Thomas's code.",
            "sender": "TEST",
            "attachments": [
                "Attach",
                "Attach2"
            ]
        },
        {
            "subject": "Testing",
            "body": "Hey, does this work?",
            "sender": "Bobby",
            "attachments": []
        },
        {
            "subject": "Hello",
            "body": "Hey, its your partner",
            "sender": "Ashley",
            "attachments": []
        }
    ],
    "email_inbox_index": 2,
    "phone_down": {
        "x1": 1080,
        "y1": 230,
        "x2": 1280,
        "y2": 280,
        "action": "function () {\r\n\tglobals.phone_screen = 11;\r\n\tchangePhoneState(1);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 1",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_up": {
        "x1": 1080,
        "y1": 580,
        "x2": 1280,
        "y2": 630,
        "action": "function () {\r\n\tchangePhoneState(2);\r\n\t//globals.phone_up(\"globals.phone_up\"); Why was this here?\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 2",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_home": {
        "x1": 1160,
        "y1": 585,
        "x2": 1200,
        "y2": 620,
        "action": "function () {\r\n\tif (globals.phone_software_installed)\r\n\t\tglobals.phone_screen = 12;\r\n\telse\r\n\t\tglobals.phone_screen = 13;\r\n\tchangePhoneState(2);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 3",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_internet": {
        "x1": 1205,
        "y1": 515,
        "x2": 1266,
        "y2": 577,
        "action": "function () {\r\n\tchangePhoneState(0);\r\n\tchangeScene(globals.web_browser);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 4",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_all_programs": {
        "x1": 1087,
        "y1": 535,
        "x2": 1130,
        "y2": 577,
        "action": "function () {\r\n\tglobals.phone_screen = 17;\r\n\tchangePhoneState(2);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 5",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_inbox": {
        "x1": 1151,
        "y1": 544,
        "x2": 1183,
        "y2": 577,
        "action": "function () {\r\n\tglobals.phone_screen = 18;\r\n\tchangePhoneState(2);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 6",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_back": {
        "x1": 1093,
        "y1": 285,
        "x2": 1145,
        "y2": 330,
        "action": "function () {\r\n\tglobals.phone_screen = 12;\r\n\tchangePhoneState(2);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 7",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "NUM_PHONE_UNINSTALL_BUTTONS": 3,
    "phone_uninstall_buttons": [
        {
            "x1": 1093,
            "y1": 340,
            "x2": 1265,
            "y2": 360,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 87",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 370,
            "x2": 1265,
            "y2": 390,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 88",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 400,
            "x2": 1265,
            "y2": 420,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 89",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        }
    ],
    "phone_email_trash": {
        "x1": 1153,
        "y1": 528,
        "x2": 1204,
        "y2": 577,
        "action": "function () {\r\n\tvar temp = []\r\n\tfor (var i = 0; i < globals.email_inbox.length; i++)\r\n\t\tif (i != globals.email_inbox_index)\r\n\t\t\ttemp[temp.length] = globals.email_inbox[i];\r\n\tglobals.email_inbox = temp;\r\n\tif (globals.email_inbox.length == 0) {\r\n\t\tglobals.email_inbox_index = 0;\r\n\t\tglobals.phone_email_trash.setEnabled(false);\r\n\t}\r\n\telse if (globals.email_inbox_index >= globals.email_inbox.length)\r\n\t\tglobals.email_inbox_index = globals.email_inbox_index - 1;\r\n\tif (globals.email_inbox_index == 0)\r\n\t\tglobals.phone_email_left_arrow.setEnabled(false);\r\n\tif (globals.email_inbox_index  == globals.email_inbox.length - 1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(false);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 8",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_email_left_arrow": {
        "x1": 1093,
        "y1": 541,
        "x2": 1148,
        "y2": 577,
        "action": "function () {\r\n\tglobals.email_inbox_index = globals.email_inbox_index - 1;\r\n\tif (globals.email_inbox_index == 0)\r\n\t\tglobals.phone_email_left_arrow.setEnabled(false);\r\n\tif (globals.email_inbox_index < globals.email_inbox.length - 1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(true);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 9",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "phone_email_right_arrow": {
        "x1": 1208,
        "y1": 541,
        "x2": 1269,
        "y2": 577,
        "action": "function () {\r\n\tglobals.email_inbox_index = globals.email_inbox_index + 1;\r\n\tglobals.phone_email_left_arrow.setEnabled(true);\r\n\tif (globals.email_inbox_index == globals.email_inbox.length -1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(false);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n}",
        "enabled": false,
        "text": "",
        "protect_text": false,
        "object_id": "Button 10",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "activeTextField": null,
    "holding_shift": false,
    "persistent_buttons": [
        {
            "x1": 1080,
            "y1": 230,
            "x2": 1280,
            "y2": 280,
            "action": "function () {\r\n\tglobals.phone_screen = 11;\r\n\tchangePhoneState(1);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 1",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1080,
            "y1": 580,
            "x2": 1280,
            "y2": 630,
            "action": "function () {\r\n\tchangePhoneState(2);\r\n\t//globals.phone_up(\"globals.phone_up\"); Why was this here?\r\n}",
            "enabled": true,
            "text": "",
            "protect_text": false,
            "object_id": "Button 2",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1160,
            "y1": 585,
            "x2": 1200,
            "y2": 620,
            "action": "function () {\r\n\tif (globals.phone_software_installed)\r\n\t\tglobals.phone_screen = 12;\r\n\telse\r\n\t\tglobals.phone_screen = 13;\r\n\tchangePhoneState(2);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 3",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1205,
            "y1": 515,
            "x2": 1266,
            "y2": 577,
            "action": "function () {\r\n\tchangePhoneState(0);\r\n\tchangeScene(globals.web_browser);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 4",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1087,
            "y1": 535,
            "x2": 1130,
            "y2": 577,
            "action": "function () {\r\n\tglobals.phone_screen = 17;\r\n\tchangePhoneState(2);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 5",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1151,
            "y1": 544,
            "x2": 1183,
            "y2": 577,
            "action": "function () {\r\n\tglobals.phone_screen = 18;\r\n\tchangePhoneState(2);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 6",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 285,
            "x2": 1145,
            "y2": 330,
            "action": "function () {\r\n\tglobals.phone_screen = 12;\r\n\tchangePhoneState(2);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 7",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 340,
            "x2": 1265,
            "y2": 360,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 87",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 370,
            "x2": 1265,
            "y2": 390,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 88",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 400,
            "x2": 1265,
            "y2": 420,
            "action": "function () {\r\n\t\t/* Scoping behavior: i within this block is equal to globals.NUM_PHONE_UNINSTALL_BUTTONS, except within\r\n\t\t\tthe for loop (var i = 0; ...) */\r\n\t\tvar temp = [];\r\n\t\tvar index_of_self;\r\n\t\tfor (var i = 0; i < globals.phone_uninstall_buttons.length; i++)\r\n\t\t\tif (globals.phone_uninstall_buttons[i] == this)\r\n\t\t\t\tindex_of_self = i;\r\n\t\tfor (var j = 0; j < globals.phone_software_apps.length; j++)\r\n\t\t\tif (j != index_of_self)\r\n\t\t\t\ttemp[temp.length] = globals.phone_software_apps[j];\r\n\t\tglobals.phone_software_apps = temp;\r\n\t\tchangePhoneState(2);\r\n\t}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 89",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1153,
            "y1": 528,
            "x2": 1204,
            "y2": 577,
            "action": "function () {\r\n\tvar temp = []\r\n\tfor (var i = 0; i < globals.email_inbox.length; i++)\r\n\t\tif (i != globals.email_inbox_index)\r\n\t\t\ttemp[temp.length] = globals.email_inbox[i];\r\n\tglobals.email_inbox = temp;\r\n\tif (globals.email_inbox.length == 0) {\r\n\t\tglobals.email_inbox_index = 0;\r\n\t\tglobals.phone_email_trash.setEnabled(false);\r\n\t}\r\n\telse if (globals.email_inbox_index >= globals.email_inbox.length)\r\n\t\tglobals.email_inbox_index = globals.email_inbox_index - 1;\r\n\tif (globals.email_inbox_index == 0)\r\n\t\tglobals.phone_email_left_arrow.setEnabled(false);\r\n\tif (globals.email_inbox_index  == globals.email_inbox.length - 1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(false);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 8",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1093,
            "y1": 541,
            "x2": 1148,
            "y2": 577,
            "action": "function () {\r\n\tglobals.email_inbox_index = globals.email_inbox_index - 1;\r\n\tif (globals.email_inbox_index == 0)\r\n\t\tglobals.phone_email_left_arrow.setEnabled(false);\r\n\tif (globals.email_inbox_index < globals.email_inbox.length - 1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(true);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 9",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        },
        {
            "x1": 1208,
            "y1": 541,
            "x2": 1269,
            "y2": 577,
            "action": "function () {\r\n\tglobals.email_inbox_index = globals.email_inbox_index + 1;\r\n\tglobals.phone_email_left_arrow.setEnabled(true);\r\n\tif (globals.email_inbox_index == globals.email_inbox.length -1)\r\n\t\tglobals.phone_email_right_arrow.setEnabled(false);\r\n\tvar g = CANVAS_ELEMENT.getContext(\"2d\");\r\n\tglobals.current_scene.draw(g);\r\n}",
            "enabled": false,
            "text": "",
            "protect_text": false,
            "object_id": "Button 10",
            "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
            "doAction": "function() {\r\n\tthis.action();\r\n}",
            "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
            "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
        }
    ],
    "player_name": "Bobby",
    "partner_name": "Ashley",
    "coffee_shop": {
        "img_no": 0,
        "buttons": [
            {
                "x1": 207,
                "y1": 127,
                "x2": 282,
                "y2": 281,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(\"Manager\", \"Do you know who did it?\", function () { \r\n\t\t\tsay(\"\", \"Click on the person responsible for these crimes!\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(true);\r\n\t\tglobals.suspect2.setEnabled(true);\r\n\t\tglobals.culprit.setEnabled(true);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, ma'am. We are the detectives you called for. Do you have any leads?\", function() { \r\n\t\t\tsay(\"Manager\", \"The guy in the suit with a top hat, the guy in the light blue shirt in the back corner, and the girl in a red shirt sitting at the counter all reported to me that they had been robbed after leaving \" +\r\n\t\t\t\t\"here.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"Let's go talk to the victims, \" + globals.player_name + \".\", closeDialogue());\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.manager.setEnabled(false);\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 12",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 763,
                "y1": 174,
                "x2": 792,
                "y2": 224,
                "action": "function () { \r\n\tsay(globals.player_name, \"Good morning. I'm a detective investigating the robberies that have been occurring here. What can you tell me?\", function () {\r\n\t\tsay(\"Shorts\", \"I ordered Halloween decorations for my house online through amazon.com, using a credit card, last week while sitting in this cafe. The tracking on the package said that the decorations had indeed shipped, \" +\r\n\t\t\"and are in a warehouse in Clarksville, Maryland, and probably will be delivered in one or two days. I used my card once in the grocery store since then, but on my credit card bill I noticed that there was also a charge \" +\r\n\t\t\"for a laptop battery on it as well. I just found out today and I'll contact the credit card company once the customer service line opens up.\", closeDialogue()); \r\n\t});\r\n\tglobals.spoken_to_witness1 = true; \r\n\tglobals.witness1.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 13",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 884,
                "y1": 207,
                "x2": 919,
                "y2": 230,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello. I'm a detective investigating the robberies that happened here. Do you have any information that could help me?\", function () { \r\n\t\tsay(\"White Pants\", \"I was in a hurry coming into work yesterday and did not have time to pay my credit card bill at my house. Since I cannot live without my morning coffee, I came here and paid my bill online. The \" +\r\n\t\t\t\"payment was successfully received, but that afternoon, when I went to the ATM to withdraw some cash, I found that my bank account balance, which should have been $342, was 0. I then went to the bank for a statement \" +\r\n\t\t\t\"to see if there had been a mistake. The statement showed someone electronically withdrew the $342 I had, and transferred the money to a Capital One bank account.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness2 = true; \r\n\tglobals.witness2.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 14",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 411,
                "y1": 158,
                "x2": 473,
                "y2": 363,
                "action": "function () {\r\n\tsay(globals.player_name, \"Hello, I'm a detective investigating the robberies here. Do you know anything \" +\r\n\t\t\"about them?\", function () {\r\n\t\tsay(\"Black Shirt\", \"I have not been robbed. I've never used a computer in here before, so I \" +\r\n\t\t\t\"think that the robberies have something to do with people's computers.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness3 = true;\r\n\tglobals.witness3.setEnabled(false);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 15",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 622,
                "y1": 238,
                "x2": 694,
                "y2": 310,
                "action": "function () { \r\n\tsay(globals.player_name, \"Hello, sir. I'm a detective investigating the robberies that happened here. Can you tell me anything about what happened to you?\", function () { \r\n\t\tsay(\"Top Hat\", \"Two days ago, I was here, browsing the internet on my laptop looking for top hats, because I need one for my role as Abraham Lincoln in the theatre production I am a part of. I purchased one online from\" +\r\n\t\t\t\" amazon.com, using a credit card. The purchase itself was not a scam, for the top hat did arrive as promised. I'm wearing it now. I haven't made any other purchases with the card since, so I am pretty sure my card\" +\r\n\t\t\t\" information was stolen here. Whoever has my card number used it to purchase a USB mouse. I cancelled that card but I couldn't remove my liability from the mouse purchase.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_tophat = true; \r\n\tglobals.tophat.setEnabled(false); \r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 16",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 771,
                "y1": 341,
                "x2": 884,
                "y2": 456,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the red shirt is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Red Shirt\", \"Huh? I haven't robbed anyone.\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"This guy's innocent, \" + globals.player_name + \". You got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, I'm investigating robberies that have been occurring here recently. Have  you heard anything about them?\", function () { \r\n\t\t\tsay(\"Red shirt\", \"No, I've never been robbed here. I'm not using the internet. I've come here for inspiration to attempt to start writing a book.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect1 = true; \r\n\t\tglobals.suspect1.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 17",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1199,
                "y1": 213,
                "x2": 1269,
                "y2": 267,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the gray suit is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Gray Suit\", \"What! I didn't do it! I swear!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Mmm. I don't see anything malicious. I think you got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect2.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"I'm investigating the robberies here. Do you have any information about them?\", function () { \r\n\t\t\tsay(\"Gray Suit\", \"I've never been robbed here. I don't come here often. I'm just looking at cat pictures on the internet. Isn't this the cutest cat you ever saw.\", function () { \r\n\t\t\t\tsay(globals.partner_name, \"No. That's an ugly looking cat.\", function () { \r\n\t\t\t\t\tdialogue(\"Gray Suit\", \"How dare you! That's the second cutest cat in the world, second to mine! What about you. What do you think?\", [\r\n\t\t\t\t\t\t[\"It's cute\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Yes, it is a pretty cute cat\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You've got a good sense for cat cuteness. I'm glad you agree with me.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"It's ugly\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I agree with \" + globals.partner_name + \". That cat is ugly\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You guys don't know what your talking about when it comes to cats.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"Unsure\", function () { \r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I don't know. Ask me on another day.\", closeDialogue());\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect2 = true;\r\n\t\tglobals.suspect2.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 18",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 972,
                "y1": 293,
                "x2": 1036,
                "y2": 363,
                "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.player_name, \"The man in the blue shoes is responsible.\", function () { \r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Blue Shoes\", \"I swear I'm innocent!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Well, the processes running on your PC show otherwise. You're downloading all the traffic from the Wi-Fi onto your computer! You're under arrest for fraud and robbery. You have the \" +\r\n\t\t\t\t\t\t\t\"right to remain silent. Anything you say in court can and will be used against you. You have the right to an attorney. If you cannot afford one, one will be provided for you.\", function () {\r\n\t\t\t\t\t\t\tsay(\"Manager\", \"Why'd you do it?\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Blue Shoes\", \"I was fired two years ago by a Starbucks in Ohio. Since then, I've been wandering the country, and I'm running out of money. It was the only thing I could do.\", function () {\r\n\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"Thank you for your help, \" + globals.player_name + \" and \" + globals.partner_name + \". With the robber in custody, I'll be able to resume business as usual again. I'll post a notice \" +\r\n\t\t\t\t\t\t\t\t\t\"regarding the risk of using my public network for financial transactions. \", function () {\r\n\t\t\t\t\t\t\t\t\t\tsay(\"Shorts\", \"Yeah, thanks guys! I had no idea that wireless network connections could be easily intercepted, even if the website itself is secure. I won't by anything on a public \" +\r\n\t\t\t\t\t\t\t\t\t\t\"network again.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"For your help, I am pleased to offer you both a $\" + (30-10*globals.incorrect_guesses) + \" gift certificate. Please accept it as a token of my thanks.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.partner_name, \"Thank you very much, ma'am.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"Thanks a lot.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene: \"coffee_shop\", score: 30-10*globals.incorrect_guesses });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.goToCoffeeShopButton.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplay_video(\"wifisniff\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.culprit.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, sir. I'm working on a case involving robberies at this cafe. Do you know anything pertinent to that matter?\", function () { \r\n\t\t\tsay(\"Blue Shoes\", \"No, I don't. I've never been robbed here. I just lost my job in Cincinnati, and I came here. I'm playing Words with Friends while I wait for job application responses.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_culprit = true;\r\n\t\tglobals.culprit.setEnabled(false); \r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 19",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { \r\n\tif (!globals.entry_message_shown) {\r\n\t\tsay(globals.partner_name, \"Let's speak to the manager and let her know we are here. She's behind the counter.\", function () { \r\n\t\t\tglobals.entry_message_shown = true; \r\n\t\t\tcloseDialogue(); \r\n\t\t\t// Delaying adding the buttons until after the entry message is shown. This prevents people from skipping it by double clicking \r\n\t\t\t// on the \"Go to the Coffee Shop button\", which triggers the top hat's dialogue, because they are in the same position on the screen.\r\n\t\t\tglobals.coffee_shop.addButton(globals.manager);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness3);\r\n\t\t\tglobals.coffee_shop.addButton(globals.tophat);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.culprit);\r\n\t\t});\r\n\t\t\r\n\t}\r\n\telse if (globals.entry_message_shown && !globals.spoken_to_all_witnesses && globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && (!globals.spoken_to_suspect1 || !globals.spoken_to_suspect2 || !globals.spoken_to_culprit)) {\r\n\t\tsay(globals.partner_name, \"Let's interview everyone else in here we haven't yet, they might have information or be the one responsible for these robberies.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t}\r\n\telse if (globals.spoken_to_witness1 && globals.spoken_to_witness2 && globals.spoken_to_tophat && globals.spoken_to_witness3 && globals.spoken_to_suspect1 && globals.spoken_to_suspect2 && globals.spoken_to_culprit && !globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.partner_name, \"Let's talk to the manager and tell him who did it.\", closeDialogue());\r\n\t\tglobals.spoken_to_all_witnesses = true;\r\n\t\tglobals.spoken_to_all_suspects = true;\r\n\t\tglobals.manager.setEnabled(true);\r\n\t}\r\n}",
        "object_id": "Scene 11",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "spoken_to_witness1": false,
    "spoken_to_witness2": false,
    "spoken_to_witness3": false,
    "spoken_to_tophat": false,
    "spoken_to_suspect1": false,
    "spoken_to_suspect2": false,
    "spoken_to_culprit": false,
    "spoken_to_all_witnesses": false,
    "spoken_to_all_suspects": false,
    "entry_message_shown": true,
    "incorrect_guesses": 0,
    "manager": {
        "x1": 207,
        "y1": 127,
        "x2": 282,
        "y2": 281,
        "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(\"Manager\", \"Do you know who did it?\", function () { \r\n\t\t\tsay(\"\", \"Click on the person responsible for these crimes!\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(true);\r\n\t\tglobals.suspect2.setEnabled(true);\r\n\t\tglobals.culprit.setEnabled(true);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, ma'am. We are the detectives you called for. Do you have any leads?\", function() { \r\n\t\t\tsay(\"Manager\", \"The guy in the suit with a top hat, the guy in the light blue shirt in the back corner, and the girl in a red shirt sitting at the counter all reported to me that they had been robbed after leaving \" +\r\n\t\t\t\t\"here.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"Let's go talk to the victims, \" + globals.player_name + \".\", closeDialogue());\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.manager.setEnabled(false);\r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 12",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "witness1": {
        "x1": 763,
        "y1": 174,
        "x2": 792,
        "y2": 224,
        "action": "function () { \r\n\tsay(globals.player_name, \"Good morning. I'm a detective investigating the robberies that have been occurring here. What can you tell me?\", function () {\r\n\t\tsay(\"Shorts\", \"I ordered Halloween decorations for my house online through amazon.com, using a credit card, last week while sitting in this cafe. The tracking on the package said that the decorations had indeed shipped, \" +\r\n\t\t\"and are in a warehouse in Clarksville, Maryland, and probably will be delivered in one or two days. I used my card once in the grocery store since then, but on my credit card bill I noticed that there was also a charge \" +\r\n\t\t\"for a laptop battery on it as well. I just found out today and I'll contact the credit card company once the customer service line opens up.\", closeDialogue()); \r\n\t});\r\n\tglobals.spoken_to_witness1 = true; \r\n\tglobals.witness1.setEnabled(false); \r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 13",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "witness2": {
        "x1": 884,
        "y1": 207,
        "x2": 919,
        "y2": 230,
        "action": "function () {\r\n\tsay(globals.player_name, \"Hello. I'm a detective investigating the robberies that happened here. Do you have any information that could help me?\", function () { \r\n\t\tsay(\"White Pants\", \"I was in a hurry coming into work yesterday and did not have time to pay my credit card bill at my house. Since I cannot live without my morning coffee, I came here and paid my bill online. The \" +\r\n\t\t\t\"payment was successfully received, but that afternoon, when I went to the ATM to withdraw some cash, I found that my bank account balance, which should have been $342, was 0. I then went to the bank for a statement \" +\r\n\t\t\t\"to see if there had been a mistake. The statement showed someone electronically withdrew the $342 I had, and transferred the money to a Capital One bank account.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness2 = true; \r\n\tglobals.witness2.setEnabled(false); \r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 14",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "witness3": {
        "x1": 411,
        "y1": 158,
        "x2": 473,
        "y2": 363,
        "action": "function () {\r\n\tsay(globals.player_name, \"Hello, I'm a detective investigating the robberies here. Do you know anything \" +\r\n\t\t\"about them?\", function () {\r\n\t\tsay(\"Black Shirt\", \"I have not been robbed. I've never used a computer in here before, so I \" +\r\n\t\t\t\"think that the robberies have something to do with people's computers.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_witness3 = true;\r\n\tglobals.witness3.setEnabled(false);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 15",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "tophat": {
        "x1": 622,
        "y1": 238,
        "x2": 694,
        "y2": 310,
        "action": "function () { \r\n\tsay(globals.player_name, \"Hello, sir. I'm a detective investigating the robberies that happened here. Can you tell me anything about what happened to you?\", function () { \r\n\t\tsay(\"Top Hat\", \"Two days ago, I was here, browsing the internet on my laptop looking for top hats, because I need one for my role as Abraham Lincoln in the theatre production I am a part of. I purchased one online from\" +\r\n\t\t\t\" amazon.com, using a credit card. The purchase itself was not a scam, for the top hat did arrive as promised. I'm wearing it now. I haven't made any other purchases with the card since, so I am pretty sure my card\" +\r\n\t\t\t\" information was stolen here. Whoever has my card number used it to purchase a USB mouse. I cancelled that card but I couldn't remove my liability from the mouse purchase.\", closeDialogue());\r\n\t});\r\n\tglobals.spoken_to_tophat = true; \r\n\tglobals.tophat.setEnabled(false); \r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 16",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "suspect1": {
        "x1": 771,
        "y1": 341,
        "x2": 884,
        "y2": 456,
        "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the red shirt is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Red Shirt\", \"Huh? I haven't robbed anyone.\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"This guy's innocent, \" + globals.player_name + \". You got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect1.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, I'm investigating robberies that have been occurring here recently. Have  you heard anything about them?\", function () { \r\n\t\t\tsay(\"Red shirt\", \"No, I've never been robbed here. I'm not using the internet. I've come here for inspiration to attempt to start writing a book.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect1 = true; \r\n\t\tglobals.suspect1.setEnabled(false); \r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 17",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "suspect2": {
        "x1": 1199,
        "y1": 213,
        "x2": 1269,
        "y2": 267,
        "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tglobals.incorrect_guesses++;\r\n\t\tsay(globals.player_name, \"The man in the gray suit is responsible.\", function () {\r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Gray Suit\", \"What! I didn't do it! I swear!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Mmm. I don't see anything malicious. I think you got the wrong guy.\", function () {\r\n\t\t\t\t\t\t\tif (globals.incorrect_guesses == 1)\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tsay(\"Police\", \"Man, this \" + globals.player_name + \" is the worst detective ever!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.suspect2.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"I'm investigating the robberies here. Do you have any information about them?\", function () { \r\n\t\t\tsay(\"Gray Suit\", \"I've never been robbed here. I don't come here often. I'm just looking at cat pictures on the internet. Isn't this the cutest cat you ever saw.\", function () { \r\n\t\t\t\tsay(globals.partner_name, \"No. That's an ugly looking cat.\", function () { \r\n\t\t\t\t\tdialogue(\"Gray Suit\", \"How dare you! That's the second cutest cat in the world, second to mine! What about you. What do you think?\", [\r\n\t\t\t\t\t\t[\"It's cute\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Yes, it is a pretty cute cat\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You've got a good sense for cat cuteness. I'm glad you agree with me.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"It's ugly\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I agree with \" + globals.partner_name + \". That cat is ugly\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Gray Suit\", \"You guys don't know what your talking about when it comes to cats.\", closeDialogue());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"Unsure\", function () { \r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I don't know. Ask me on another day.\", closeDialogue());\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.spoken_to_suspect2 = true;\r\n\t\tglobals.suspect2.setEnabled(false); \r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 18",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "culprit": {
        "x1": 972,
        "y1": 293,
        "x2": 1036,
        "y2": 363,
        "action": "function () { \r\n\tif (globals.spoken_to_all_witnesses && globals.spoken_to_all_suspects) {\r\n\t\tsay(globals.player_name, \"The man in the blue shoes is responsible.\", function () { \r\n\t\t\tsay(\"Manager\", \"Okay, I'll call the police.\", function () {\r\n\t\t\t\tsay(\"Police\", \"Sir, we have reasonable suspicion to believe that you are the one responsible for the recent robberies at this cafe.\", function () {\r\n\t\t\t\t\tsay(\"Blue Shoes\", \"I swear I'm innocent!\", function () {\r\n\t\t\t\t\t\tsay(\"Police\", \"Well, the processes running on your PC show otherwise. You're downloading all the traffic from the Wi-Fi onto your computer! You're under arrest for fraud and robbery. You have the \" +\r\n\t\t\t\t\t\t\t\"right to remain silent. Anything you say in court can and will be used against you. You have the right to an attorney. If you cannot afford one, one will be provided for you.\", function () {\r\n\t\t\t\t\t\t\tsay(\"Manager\", \"Why'd you do it?\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Blue Shoes\", \"I was fired two years ago by a Starbucks in Ohio. Since then, I've been wandering the country, and I'm running out of money. It was the only thing I could do.\", function () {\r\n\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"Thank you for your help, \" + globals.player_name + \" and \" + globals.partner_name + \". With the robber in custody, I'll be able to resume business as usual again. I'll post a notice \" +\r\n\t\t\t\t\t\t\t\t\t\"regarding the risk of using my public network for financial transactions. \", function () {\r\n\t\t\t\t\t\t\t\t\t\tsay(\"Shorts\", \"Yeah, thanks guys! I had no idea that wireless network connections could be easily intercepted, even if the website itself is secure. I won't by anything on a public \" +\r\n\t\t\t\t\t\t\t\t\t\t\"network again.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tsay(\"Manager\", \"For your help, I am pleased to offer you both a $\" + (30-10*globals.incorrect_guesses) + \" gift certificate. Please accept it as a token of my thanks.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.partner_name, \"Thank you very much, ma'am.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"Thanks a lot.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene: \"coffee_shop\", score: 30-10*globals.incorrect_guesses });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.goToCoffeeShopButton.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplay_video(\"wifisniff\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tglobals.culprit.setEnabled(false);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.player_name, \"Hello, sir. I'm working on a case involving robberies at this cafe. Do you know anything pertinent to that matter?\", function () { \r\n\t\t\tsay(\"Blue Shoes\", \"No, I don't. I've never been robbed here. I just lost my job in Cincinnati, and I came here. I'm playing Words with Friends while I wait for job application responses.\", closeDialogue());\r\n\t\t});\r\n\t\tglobals.spoken_to_culprit = true;\r\n\t\tglobals.culprit.setEnabled(false); \r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 19",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "start": {
        "img_no": 1,
        "buttons": [
            {
                "x1": 300,
                "y1": 100,
                "x2": 940,
                "y2": 400,
                "action": "function () { changeScene(globals.coffee_shop); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 21",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 300,
                "y1": 470,
                "x2": 532,
                "y2": 530,
                "action": "function () { changeScene(globals.mall); }",
                "enabled": true,
                "text": "Go to the mall",
                "protect_text": false,
                "object_id": "Button 22",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 64,
                "y1": 470,
                "x2": 256,
                "y2": 530,
                "action": "function () { changeScene(globals.library); }",
                "enabled": true,
                "text": "Go to the library",
                "protect_text": false,
                "object_id": "Button 24",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 20",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "goToCoffeeShopButton": {
        "x1": 300,
        "y1": 100,
        "x2": 940,
        "y2": 400,
        "action": "function () { changeScene(globals.coffee_shop); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 21",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "goToTheMallButton": {
        "x1": 300,
        "y1": 470,
        "x2": 532,
        "y2": 530,
        "action": "function () { changeScene(globals.mall); }",
        "enabled": true,
        "text": "Go to the mall",
        "protect_text": false,
        "object_id": "Button 22",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "goToWebBrowser": {
        "x1": 600,
        "y1": 470,
        "x2": 832,
        "y2": 530,
        "action": "function () { changeScene(globals.web_browser); }",
        "enabled": true,
        "text": "Go to web browser",
        "protect_text": false,
        "object_id": "Button 23",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "goToTheLibrary": {
        "x1": 64,
        "y1": 470,
        "x2": 256,
        "y2": 530,
        "action": "function () { changeScene(globals.library); }",
        "enabled": true,
        "text": "Go to the library",
        "protect_text": false,
        "object_id": "Button 24",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "mall": {
        "img_no": 3,
        "buttons": [
            {
                "x1": 696,
                "y1": 320,
                "x2": 793,
                "y2": 414,
                "action": "function () { changeScene(globals.free_phone_software); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 26",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1,
                "y1": 208,
                "x2": 185,
                "y2": 610,
                "action": "function () { changeScene(globals.hook_my_phone_up); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 27",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1201,
                "y1": 310,
                "x2": 1269,
                "y2": 500,
                "action": "function () { changeScene (globals.open_source_phones); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 28",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 600,
                "y1": 341,
                "x2": 632,
                "y2": 452,
                "action": "function () { say(\"Dark Blue Dress\", \"Hey, what's up?\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 29",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () {\r\n\tif (!globals.mall_entry_message_shown) {\r\n\t\tglobals.mall_entry_message_shown = true;\r\n\t\tsay (globals.player_name, \"(I just found this phone, but its not working. Maybe I can find what I need in here.)\", function () {\r\n\t\t\tsay(\"Saleman\", \"COME TO FREEPHONESOFTWARE.COM! A PHONE APPLICATION PROVIDING THE BASIC FUNCTUNALITY YOU NEED, 100% FREE, NO QUESTIONS ASKED!\", function () {\r\n\t\t\t\tsay(globals.player_name, \"(That might be what I need)\", closeDialogue());\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}",
        "object_id": "Scene 25",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "mall_entry_message_shown": true,
    "goToFreePhoneSoftware": {
        "x1": 696,
        "y1": 320,
        "x2": 793,
        "y2": 414,
        "action": "function () { changeScene(globals.free_phone_software); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 26",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "goToHookMyPhoneUp": {
        "x1": 1,
        "y1": 208,
        "x2": 185,
        "y2": 610,
        "action": "function () { changeScene(globals.hook_my_phone_up); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 27",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "goToOpenSourcePhones": {
        "x1": 1201,
        "y1": 310,
        "x2": 1269,
        "y2": 500,
        "action": "function () { changeScene (globals.open_source_phones); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 28",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "mall_woman_walking": {
        "x1": 600,
        "y1": 341,
        "x2": 632,
        "y2": 452,
        "action": "function () { say(\"Dark Blue Dress\", \"Hey, what's up?\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 29",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "free_phone_software": {
        "img_no": 4,
        "buttons": [
            {
                "x1": 484,
                "y1": 414,
                "x2": 696,
                "y2": 440,
                "action": "function () { globals.browser_bar.text = \"freephonesoftware.com\"; changeScene(globals.free_phone_software_web_page); changePhoneState(0); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 31",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 977,
                "y1": 274,
                "x2": 1051,
                "y2": 518,
                "action": "function () { changeScene(globals.mall); }",
                "enabled": true,
                "text": "Back to Mall",
                "protect_text": false,
                "object_id": "Button 32",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 380,
                "y1": 308,
                "x2": 417,
                "y2": 465,
                "action": "function () { say(\"Yellow Backpack\", \"Hi\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 33",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 742,
                "y1": 282,
                "x2": 801,
                "y2": 450,
                "action": "function () { say(\"White Shirt\", \"Hello, how can I help you?\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 34",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 893,
                "y1": 300,
                "x2": 950,
                "y2": 484,
                "action": "function () { say(\"Purple Shirt\", \"This man's product is a bit too good to be true\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 35",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 30",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "install_free_phone_software": {
        "x1": 484,
        "y1": 414,
        "x2": 696,
        "y2": 440,
        "action": "function () { globals.browser_bar.text = \"freephonesoftware.com\"; changeScene(globals.free_phone_software_web_page); changePhoneState(0); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 31",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "exit_free_phone_software": {
        "x1": 977,
        "y1": 274,
        "x2": 1051,
        "y2": 518,
        "action": "function () { changeScene(globals.mall); }",
        "enabled": true,
        "text": "Back to Mall",
        "protect_text": false,
        "object_id": "Button 32",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "free_phone_software_yellow_backpack": {
        "x1": 380,
        "y1": 308,
        "x2": 417,
        "y2": 465,
        "action": "function () { say(\"Yellow Backpack\", \"Hi\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 33",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "free_phone_software_white_shirt": {
        "x1": 742,
        "y1": 282,
        "x2": 801,
        "y2": 450,
        "action": "function () { say(\"White Shirt\", \"Hello, how can I help you?\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 34",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "free_phone_software_purple_shirt": {
        "x1": 893,
        "y1": 300,
        "x2": 950,
        "y2": 484,
        "action": "function () { say(\"Purple Shirt\", \"This man's product is a bit too good to be true\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 35",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up": {
        "img_no": 5,
        "buttons": [
            {
                "x1": 930,
                "y1": 329,
                "x2": 1099,
                "y2": 442,
                "action": "function () { globals.browser_bar.text = \"hookmyphoneup.net\"; changeScene(globals.hook_my_phone_up_web_page); changePhoneState(0); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 38",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 725,
                "y1": 189,
                "x2": 823,
                "y2": 290,
                "action": "function () { changeScene(globals.mall); }",
                "enabled": true,
                "text": "Back to Mall",
                "protect_text": false,
                "object_id": "Button 37",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 595,
                "y1": 218,
                "x2": 656,
                "y2": 461,
                "action": "function () { say(\"Green Shirt\", \"Hello\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 39",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 843,
                "y1": 243,
                "x2": 911,
                "y2": 485,
                "action": "function () { say(\"Red Heels\", \"Hello\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 40",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 330,
                "y1": 266,
                "x2": 400,
                "y2": 385,
                "action": "function () { say(\"Magenta Shirt\", \"Hello\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 41",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 436,
                "y1": 191,
                "x2": 502,
                "y2": 426,
                "action": "function () { say(\"Bowtie\", \"Hello\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 42",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 36",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "exit_hook_my_phone_up": {
        "x1": 725,
        "y1": 189,
        "x2": 823,
        "y2": 290,
        "action": "function () { changeScene(globals.mall); }",
        "enabled": true,
        "text": "Back to Mall",
        "protect_text": false,
        "object_id": "Button 37",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "install_hook_my_phone_up": {
        "x1": 930,
        "y1": 329,
        "x2": 1099,
        "y2": 442,
        "action": "function () { globals.browser_bar.text = \"hookmyphoneup.net\"; changeScene(globals.hook_my_phone_up_web_page); changePhoneState(0); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 38",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up_green_shirt": {
        "x1": 595,
        "y1": 218,
        "x2": 656,
        "y2": 461,
        "action": "function () { say(\"Green Shirt\", \"Hello\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 39",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up_red_heels": {
        "x1": 843,
        "y1": 243,
        "x2": 911,
        "y2": 485,
        "action": "function () { say(\"Red Heels\", \"Hello\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 40",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up_pink_shirt": {
        "x1": 330,
        "y1": 266,
        "x2": 400,
        "y2": 385,
        "action": "function () { say(\"Magenta Shirt\", \"Hello\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 41",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up_man": {
        "x1": 436,
        "y1": 191,
        "x2": 502,
        "y2": 426,
        "action": "function () { say(\"Bowtie\", \"Hello\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 42",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "open_source_phones": {
        "img_no": 6,
        "buttons": [
            {
                "x1": 500,
                "y1": 600,
                "x2": 600,
                "y2": 630,
                "action": "function () { changeScene(globals.mall); }",
                "enabled": true,
                "text": "Back to Mall",
                "protect_text": false,
                "object_id": "Button 44",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 410,
                "y1": 132,
                "x2": 643,
                "y2": 297,
                "action": "function () { globals.browser_bar.text = \"opensourcephones.org\"; changeScene(globals.open_source_phones_web_page); changePhoneState(0); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 45",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 242,
                "y1": 208,
                "x2": 342,
                "y2": 341,
                "action": "function () { say(\"Red Tie\", \"Hello, how can I help you today?\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 46",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1045,
                "y1": 267,
                "x2": 1138,
                "y2": 486,
                "action": "function () { say(\"Blue Backpack\", \"Hi\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 48",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 731,
                "y1": 282,
                "x2": 807,
                "y2": 445,
                "action": "function () { say(\"Yellow Shirt\", \"Hello\", closeDialogue()); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 47",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 43",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "exit_open_source_phones": {
        "x1": 500,
        "y1": 600,
        "x2": 600,
        "y2": 630,
        "action": "function () { changeScene(globals.mall); }",
        "enabled": true,
        "text": "Back to Mall",
        "protect_text": false,
        "object_id": "Button 44",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "install_open_source_phones": {
        "x1": 410,
        "y1": 132,
        "x2": 643,
        "y2": 297,
        "action": "function () { globals.browser_bar.text = \"opensourcephones.org\"; changeScene(globals.open_source_phones_web_page); changePhoneState(0); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 45",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "open_source_phones_employee": {
        "x1": 242,
        "y1": 208,
        "x2": 342,
        "y2": 341,
        "action": "function () { say(\"Red Tie\", \"Hello, how can I help you today?\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 46",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "open_source_phones_woman": {
        "x1": 731,
        "y1": 282,
        "x2": 807,
        "y2": 445,
        "action": "function () { say(\"Yellow Shirt\", \"Hello\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 47",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "open_source_phones_backpack": {
        "x1": 1045,
        "y1": 267,
        "x2": 1138,
        "y2": 486,
        "action": "function () { say(\"Blue Backpack\", \"Hi\", closeDialogue()); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 48",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "web_browser": {
        "img_no": 7,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 49",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "browser_bar": {
        "x1": 189,
        "y1": 20,
        "x2": 931,
        "y2": 61,
        "action": "function () { setActiveTextField(globals.browser_bar); }",
        "enabled": true,
        "text": "opensourcephones.org",
        "protect_text": false,
        "object_id": "Button 50",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "browser_x_button": {
        "x1": 1042,
        "y1": 28,
        "x2": 1067,
        "y2": 54,
        "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 51",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "registration_page": {
        "img_no": 8,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 390,
                "y1": 160,
                "x2": 850,
                "y2": 200,
                "action": "function () { setActiveTextField(globals.username_field); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 53",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 390,
                "y1": 240,
                "x2": 850,
                "y2": 280,
                "action": "function () { setActiveTextField(globals.password_field); }",
                "enabled": true,
                "text": "",
                "protect_text": true,
                "object_id": "Button 54",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 667,
                "y1": 305,
                "x2": 703,
                "y2": 338,
                "action": "function () { globals.mfa_check_box.text = (globals.mfa_check_box.text == \"x\") ? \"\" : \"x\"; globals.current_scene.draw(CANVAS_ELEMENT.getContext(\"2d\")); }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 55",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 728,
                "y1": 469,
                "x2": 850,
                "y2": 515,
                "action": "function () {\r\n\tif (globals.username_field.text == \"\" || globals.password_field.text == \"\") {\r\n\t\talert(\"Both a username and a password are required.\");\r\n\t}\r\n\telse {\r\n\t\t// Valid registration, notify server\r\n\t\tsocket.emit ('register', { username: globals.username_field.text, password: globals.password_field.text, email: \"\", mfa: false });\r\n\t\t//socket.emit('register', { username: globals.username_field.text, password: globals.password_field.text, email: email_field.text, mfa: (globals.mfa_check_box.text == \"x\") });\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 56",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 52",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "username_field": {
        "x1": 390,
        "y1": 160,
        "x2": 850,
        "y2": 200,
        "action": "function () { setActiveTextField(globals.username_field); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 53",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "password_field": {
        "x1": 390,
        "y1": 240,
        "x2": 850,
        "y2": 280,
        "action": "function () { setActiveTextField(globals.password_field); }",
        "enabled": true,
        "text": "",
        "protect_text": true,
        "object_id": "Button 54",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "mfa_check_box": {
        "x1": 667,
        "y1": 305,
        "x2": 703,
        "y2": 338,
        "action": "function () { globals.mfa_check_box.text = (globals.mfa_check_box.text == \"x\") ? \"\" : \"x\"; globals.current_scene.draw(CANVAS_ELEMENT.getContext(\"2d\")); }",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 55",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "registration_submit": {
        "x1": 728,
        "y1": 469,
        "x2": 850,
        "y2": 515,
        "action": "function () {\r\n\tif (globals.username_field.text == \"\" || globals.password_field.text == \"\") {\r\n\t\talert(\"Both a username and a password are required.\");\r\n\t}\r\n\telse {\r\n\t\t// Valid registration, notify server\r\n\t\tsocket.emit ('register', { username: globals.username_field.text, password: globals.password_field.text, email: \"\", mfa: false });\r\n\t\t//socket.emit('register', { username: globals.username_field.text, password: globals.password_field.text, email: email_field.text, mfa: (globals.mfa_check_box.text == \"x\") });\r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 56",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "four_oh_four": {
        "img_no": 9,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 57",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "free_phone_software_web_page": {
        "img_no": 14,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 330,
                "y1": 506,
                "x2": 977,
                "y2": 631,
                "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 11; \r\n\tglobals.phone_software_installed = false; \r\n\tchangePhoneState(2); \r\n\tglobals.phone_virus_downloaded = 1;\r\n\tsay(globals.player_name, \"(I don't think that worked... that probably isn't good.)\", closeDialogue());\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"trojan.horse\";\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 59",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 58",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "phone_virus_downloaded": 0,
    "free_phone_software_download_button": {
        "x1": 330,
        "y1": 506,
        "x2": 977,
        "y2": 631,
        "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 11; \r\n\tglobals.phone_software_installed = false; \r\n\tchangePhoneState(2); \r\n\tglobals.phone_virus_downloaded = 1;\r\n\tsay(globals.player_name, \"(I don't think that worked... that probably isn't good.)\", closeDialogue());\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"trojan.horse\";\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 59",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "hook_my_phone_up_web_page": {
        "img_no": 15,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 329,
                "y1": 281,
                "x2": 905,
                "y2": 439,
                "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 12; \r\n\tglobals.phone_software_installed = true; \r\n\tchangePhoneState(2); \r\n\tsay(globals.player_name, \"(That looks like it worked... my phone's working now)\", function () { closeDialogue(); changeScene(globals.start); });\r\n\tsocket.emit('scene_complete', { scene: \"mall\", score: 20 - 10*globals.phone_virus_downloaded });\r\n\tif (globals.phone_virus_downloaded < 0.5)\r\n\t\tglobals.phone_virus_downloaded = 0.5;\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"Conduit Search Helper\";\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"24x7x52 Tech Support\";\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 61",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 60",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "hook_my_phone_up_download_button": {
        "x1": 329,
        "y1": 281,
        "x2": 905,
        "y2": 439,
        "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 12; \r\n\tglobals.phone_software_installed = true; \r\n\tchangePhoneState(2); \r\n\tsay(globals.player_name, \"(That looks like it worked... my phone's working now)\", function () { closeDialogue(); changeScene(globals.start); });\r\n\tsocket.emit('scene_complete', { scene: \"mall\", score: 20 - 10*globals.phone_virus_downloaded });\r\n\tif (globals.phone_virus_downloaded < 0.5)\r\n\t\tglobals.phone_virus_downloaded = 0.5;\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"Conduit Search Helper\";\r\n\tglobals.phone_software_apps[globals.phone_software_apps.length] = \"24x7x52 Tech Support\";\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 61",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "open_source_phones_web_page": {
        "img_no": 16,
        "buttons": [
            {
                "x1": 189,
                "y1": 20,
                "x2": 931,
                "y2": 61,
                "action": "function () { setActiveTextField(globals.browser_bar); }",
                "enabled": true,
                "text": "opensourcephones.org",
                "protect_text": false,
                "object_id": "Button 50",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 1042,
                "y1": 28,
                "x2": 1067,
                "y2": 54,
                "action": "function () { changeScene(globals.previous_world_scene); if (globals.phone_state == 0) changePhoneState(1) }",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 51",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 329,
                "y1": 281,
                "x2": 905,
                "y2": 439,
                "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 12; \r\n\tglobals.phone_software_installed = true; \r\n\tchangePhoneState(2); \r\n\tsay(globals.player_name, \"(That looks like it worked... my phone's working now)\", function () { closeDialogue(); changeScene(globals.start); });\r\n\tsocket.emit('scene_complete', { scene: \"mall\", score: 30 - 15*globals.phone_virus_downloaded });\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 63",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 62",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "open_source_phones_download_button": {
        "x1": 329,
        "y1": 281,
        "x2": 905,
        "y2": 439,
        "action": "function () { \r\n\tchangeScene(globals.previous_world_scene); \r\n\tglobals.phone_screen = 12; \r\n\tglobals.phone_software_installed = true; \r\n\tchangePhoneState(2); \r\n\tsay(globals.player_name, \"(That looks like it worked... my phone's working now)\", function () { closeDialogue(); changeScene(globals.start); });\r\n\tsocket.emit('scene_complete', { scene: \"mall\", score: 30 - 15*globals.phone_virus_downloaded });\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 63",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "library": {
        "img_no": 19,
        "buttons": [
            {
                "x1": 1058,
                "y1": 246,
                "x2": 1224,
                "y2": 415,
                "action": "function () { \r\n\tchangeScene(globals.library_librarian);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 65",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 576,
                "y1": 342,
                "x2": 693,
                "y2": 469,
                "action": "function () {\r\n\tchangeScene(globals.library_abandoned_computer);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 66",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 722,
                "y1": 342,
                "x2": 845,
                "y2": 461,
                "action": "function () {\r\n\tchangeScene(globals.library_student1);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 67",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 854,
                "y1": 312,
                "x2": 893,
                "y2": 347,
                "action": "function () {\r\n\tchangeScene(globals.library_student2);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 68",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 451,
                "y1": 299,
                "x2": 495,
                "y2": 384,
                "action": "function () {\r\n\tchangeScene(globals.library_student3);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 69",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 2,
                "y1": 229,
                "x2": 104,
                "y2": 338,
                "action": "function () {\r\n\tsay(\"Striped Shirt\", \"What's the integral of sin^2 (x)?\", closeDialogue());\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 70",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 402,
                "y1": 243,
                "x2": 422,
                "y2": 258,
                "action": "function () {\r\n\tchangeScene(globals.start);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 71",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () {\r\n\tif (!globals.library_entry_message_shown) {\r\n\t\tsay(globals.partner_name, \"Why don't we go talk to the librarian? She's sitting at the desk over on the right.\", closeDialogue());\r\n\t\tglobals.library_entry_message_shown = true;\r\n\t}\r\n}",
        "object_id": "Scene 64",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "library_entry_message_shown": false,
    "librarian_spoken_to_once": false,
    "library_have_flash_drive1": false,
    "library_fixing_the_computer": false,
    "library_score": 0,
    "librarian_button": {
        "x1": 1058,
        "y1": 246,
        "x2": 1224,
        "y2": 415,
        "action": "function () { \r\n\tchangeScene(globals.library_librarian);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 65",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "abandoned_computer_button": {
        "x1": 576,
        "y1": 342,
        "x2": 693,
        "y2": 469,
        "action": "function () {\r\n\tchangeScene(globals.library_abandoned_computer);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 66",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "student1_button": {
        "x1": 722,
        "y1": 342,
        "x2": 845,
        "y2": 461,
        "action": "function () {\r\n\tchangeScene(globals.library_student1);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 67",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "student2_button": {
        "x1": 854,
        "y1": 312,
        "x2": 893,
        "y2": 347,
        "action": "function () {\r\n\tchangeScene(globals.library_student2);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 68",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "student3_button": {
        "x1": 451,
        "y1": 299,
        "x2": 495,
        "y2": 384,
        "action": "function () {\r\n\tchangeScene(globals.library_student3);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 69",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "guy_at_whiteboard": {
        "x1": 2,
        "y1": 229,
        "x2": 104,
        "y2": 338,
        "action": "function () {\r\n\tsay(\"Striped Shirt\", \"What's the integral of sin^2 (x)?\", closeDialogue());\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 70",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "library_exit_door": {
        "x1": 402,
        "y1": 243,
        "x2": 422,
        "y2": 258,
        "action": "function () {\r\n\tchangeScene(globals.start);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 71",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "library_librarian": {
        "img_no": 20,
        "buttons": [
            {
                "x1": 123,
                "y1": 77,
                "x2": 602,
                "y2": 611,
                "action": "function () {\r\n\tif (globals.library_fixing_the_computer) {\r\n\t\tdialogue(\"Librarian\", \"Did you get it fixed?\", globals.librarian_fixing_the_computer_dialog_options);\r\n\t}\r\n\telse if (globals.librarian_spoken_to_once) {\r\n\t\tdialogue(\"Librarian\", \"Do you know what's causing the problem?\", globals.librarian_dialogue_options);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.partner_name, \"Hello ma'am. We're the detectives that you asked to come help. What can you tell us about what is happening?\", function () {\r\n\t\t\tsay(\"Librarian\", \"Thanks for coming. About a day ago, one of the computers in the computer lab stopped working normally, and instead, \" +\r\n\t\t\t\t\t\t\t \"It got stuck on some strange website. Since then, it seems like every few hours, another computer is lost to this virus, \" +\r\n\t\t\t\t\t\t\t \"and I don't know what is causing it or how to remove it. I need you to find the cause, and if you can, show me how to fix \" +\r\n\t\t\t\t\t\t\t \"one of the computers, if you can find a solution.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"We'll do our best, ma'am.\", function () {\r\n\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\tglobals.librarian_spoken_to_once = true;\r\n\t\t\t\t\tchangeScene(globals.library);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 73",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 0,
                "y1": 0,
                "x2": 100,
                "y2": 100,
                "action": "function () {\r\n\tchangeScene(globals.library);\r\n}",
                "enabled": true,
                "text": "Back",
                "protect_text": false,
                "object_id": "Button 74"
            }
        ],
        "run_after_action": "function () { }",
        "object_id": "Scene 72",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "librarian_dialogue_options": [
        [
            "I don't know yet.",
            "function () {\r\n\t\tsay(globals.player_name, \"I'm not sure yet.\", function () {\r\n\t\t\tsay(\"Librarian\", \"Ok, come talk to me if you figure something out.\", function () {\r\n\t\t\t\tcloseDialogue();\r\n\t\t\t\tchangeScene(globals.library);\r\n\t\t\t});\r\n\t\t});\r\n\t}"
        ]
    ],
    "librarian_fixing_the_computer_dialog_options": [
        [
            "Not yet. I'm still working on it",
            "function () {\r\n\t\tsay(globals.player_name, \"Not yet. I'm still working on it\", function () {\r\n\t\t\tsay(\"Librarian\", \"Okay. If you can't get it, that's okay.\", function () {\r\n\t\t\t\tcloseDialogue();\r\n\t\t\t\tchangeScene(globals.computer_file_system); \r\n\t\t\t});\r\n\t\t});\r\n\t}"
        ],
        [
            "Sorry. I can't find the problem. Get the IT guys",
            "function () {\r\n\t\tsay(globals.player_name, \"Sorry. I couldn't figure it out. You'll have to call in the IT professionals.\", function () {\r\n\t\t\tsay(\"Librarian\", \"That's fine. You've already done enough. Thanks for all the help!\", function () {\r\n\t\t\t\tcloseDialogue();\r\n\t\t\t\tchangeScene(globals.start);\r\n\t\t\t});\r\n\t\t});\r\n\t}"
        ]
    ],
    "talk_to_librarian": {
        "x1": 123,
        "y1": 77,
        "x2": 602,
        "y2": 611,
        "action": "function () {\r\n\tif (globals.library_fixing_the_computer) {\r\n\t\tdialogue(\"Librarian\", \"Did you get it fixed?\", globals.librarian_fixing_the_computer_dialog_options);\r\n\t}\r\n\telse if (globals.librarian_spoken_to_once) {\r\n\t\tdialogue(\"Librarian\", \"Do you know what's causing the problem?\", globals.librarian_dialogue_options);\r\n\t}\r\n\telse {\r\n\t\tsay(globals.partner_name, \"Hello ma'am. We're the detectives that you asked to come help. What can you tell us about what is happening?\", function () {\r\n\t\t\tsay(\"Librarian\", \"Thanks for coming. About a day ago, one of the computers in the computer lab stopped working normally, and instead, \" +\r\n\t\t\t\t\t\t\t \"It got stuck on some strange website. Since then, it seems like every few hours, another computer is lost to this virus, \" +\r\n\t\t\t\t\t\t\t \"and I don't know what is causing it or how to remove it. I need you to find the cause, and if you can, show me how to fix \" +\r\n\t\t\t\t\t\t\t \"one of the computers, if you can find a solution.\", function () {\r\n\t\t\t\tsay(globals.partner_name, \"We'll do our best, ma'am.\", function () {\r\n\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\tglobals.librarian_spoken_to_once = true;\r\n\t\t\t\t\tchangeScene(globals.library);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 73",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "abandoned_computer_back_button": {
        "x1": 0,
        "y1": 0,
        "x2": 100,
        "y2": 100,
        "action": "function () {\r\n\tchangeScene(globals.library);\r\n}",
        "enabled": true,
        "text": "Back",
        "protect_text": false,
        "object_id": "Button 74"
    },
    "library_abandoned_computer": {
        "img_no": 21,
        "buttons": [
            {
                "x1": 248,
                "y1": 517,
                "x2": 320,
                "y2": 573,
                "action": "function () {\r\n\tdialogue(\"\", \"It's a red flash drive.\", globals.abandoned_usb_dialog_options);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 76",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 540,
                "y1": 61,
                "x2": 658,
                "y2": 167,
                "action": "function () {\r\n\tif (globals.abandoned_computer_infected) {\r\n\t\tglobals.abandoned_computer_temp_browser_bar = globals.browser_bar.text;\r\n\t\tglobals.abandoned_computer_temp_browser_bar_enabled = true;\r\n\t\tglobals.browser_bar.text = \"freephonesoftware.com\"\r\n\t\tchangeScene(globals.free_phone_software_web_page);\r\n\t}\r\n\telse {\r\n\t\tchangeScene(globals.web_browser);\r\n\t}\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 77",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            },
            {
                "x1": 0,
                "y1": 0,
                "x2": 100,
                "y2": 100,
                "action": "function () {\r\n\tchangeScene(globals.library);\r\n}",
                "enabled": true,
                "text": "Back",
                "protect_text": false,
                "object_id": "Button 74"
            },
            {
                "x1": 671,
                "y1": 161,
                "x2": 901,
                "y2": 354,
                "action": "function () {\r\n\tglobals.computer_file_system.buttons = globals.library_computer_file_system.getButtonList();\r\n\tchangeScene(globals.computer_file_system);\r\n}",
                "enabled": true,
                "text": "",
                "protect_text": false,
                "object_id": "Button 78",
                "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
                "doAction": "function() {\r\n\tthis.action();\r\n}",
                "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
                "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
            }
        ],
        "run_after_action": "function () {\r\n\tif (globals.abandoned_computer_temp_browser_bar_enabled) {\r\n\t\tglobals.browser_bar.text = globals.abandoned_computer_temp_browser_bar; \r\n\t\tglobals.abandoned_computer_temp_browser_bar_enabled = false;\r\n\t}\r\n}",
        "object_id": "Scene 75",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "abandoned_computer_temp_browser_bar": "",
    "abandoned_computer_temp_browser_bar_enabled": false,
    "abandoned_computer_infected": false,
    "library_have_flash_drive2": false,
    "librarian_dialogue_option_both_usbs": [
        "Both flash drives.",
        "function () {\r\n\tsay(globals.player_name, \"It's these two USB drives. I found this one abandoned in front of a computer, and this one the kid with the \" +\r\n \t\t\t\t\t \"glasses plugged into his computer and it redirected him to a suspicious website.\", function () {\r\n\t\tglobals.library_score += 20;\r\n\t\tdialogue(\"Librarian\", \"Great! Do you think you can fix or should I call the IT guys?\", [\r\n\t\t\t[\"Let me fix it!\", function () {\r\n\t\t\t\tsay(globals.player_name, \"Sure, I think I can fix it.\", function () {\r\n\t\t\t\t\tsay(\"Librarian\", \"Ok, then check out this computer. If you can't figure it out, that's okay.\", function () {\r\n\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\tglobals.library_fixing_the_computer = true;\t\t\t\t\t\t\r\n\t\t\t\t\t\tglobals.computer_file_system.buttons = globals.infected_library_computer_file_system.getButtonList();\r\n\t\t\t\t\t\tchangeScene(globals.computer_file_system);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}],\r\n\t\t\t[\"Call in the IT Professionals.\", function () {\r\n\t\t\t\tsay(globals.player_name, \"I don't think I can fix it. Get the IT guys to do it.\", function () {\r\n\t\t\t\t\tsay(\"Librarian\", \"Ok, that's fine. Thanks for your help! You've done enough.\", function () {\r\n\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\tglobals.goToTheLibrary.setEnabled(false);\r\n\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\tsocket.emit('scene_complete', { scene:\"library\", score:globals.library_score });\r\n\t\t\t\t\t\tplay_video('virusremoval');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}]\r\n\t\t]);\r\n\t});\r\n}"
    ],
    "abandoned_usb_dialog_options": [
        [
            "Do nothing",
            "function () {\r\n\t\tcloseDialogue();\r\n\t}"
        ],
        [
            "Take it.",
            "function () {\r\n\t\tsay(\"\", \"You take the red flash drive.\", function () {\r\n\t\t\tglobals.abandoned_usb.setEnabled(false);\r\n\t\t\tglobals.librarian_dialogue_options[globals.librarian_dialogue_options.length] = [\"The abandoned red flash drive.\", function () {\r\n\t\t\t\tsay(globals.player_name, \"It's this USB drive. I found it abandoned in front of a computer.\", function () {\r\n\t\t\t\t\tglobals.library_score += 10;\r\n\t\t\t\t\tdialogue(\"Librarian\", \"Great! Do you think you can fix or should I call the IT guys?\", [\r\n\t\t\t\t\t\t[\"Let me fix it!\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Sure, I think I can fix it.\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Librarian\", \"Ok, then check out this computer. If you can't figure it out, that's okay.\", function () {\r\n\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\tglobals.computer_file_system.buttons = globals.infected_library_computer_file_system.getButtonList();\r\n\t\t\t\t\t\t\t\t\tglobals.library_fixing_the_computer = true;\r\n\t\t\t\t\t\t\t\t\tchangeScene(globals.computer_file_system);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t[\"Call in the IT Professionals\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"I don't think I can fix it. Get the IT guys to do it.\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Librarian\", \"Ok, that's fine. Thanks for your help! You've done enough.\", function () {\r\n\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\tglobals.goToTheLibrary.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene:\"library\", score:globals.library_score });\r\n\t\t\t\t\t\t\t\t\tplay_video('virusremoval');\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t]);\r\n\t\t\t\t});\r\n\t\t\t}];\r\n\t\t\tglobals.library_have_flash_drive2 = true;\r\n\t\t\tif (globals.library_have_flash_drive1 && globals.library_have_flash_drive2) {\r\n\t\t\t\tglobals.librarian_dialogue_options[globals.librarian_dialogue_options.length] = globals.librarian_dialogue_option_both_usbs;\r\n\t\t\t}\r\n\t\t\tcloseDialogue();\r\n\t\t});\r\n\t}"
        ],
        [
            "Put it in the computer",
            "function () {\r\n\t\tglobals.abandoned_computer_infected = true;\r\n\t\tsay(globals.partner_name, \"I don't think that was good. Take a look at the web browser. It's on some sketchy looking website.\", closeDialogue());\r\n\t\tglobals.library_score -= 5;\r\n\t\t// Delete this option from the dialog.\r\n\t\tglobals.abandoned_usb_dialog_options = [globals.abandoned_usb_dialog_options[0], globals.abandoned_usb_dialog_options[1]]; \r\n\t\tglobals.library_computer_file_system.addFile(\"Downloads\", \"trojan.horse\");\r\n\t}"
        ]
    ],
    "abandoned_usb": {
        "x1": 248,
        "y1": 517,
        "x2": 320,
        "y2": 573,
        "action": "function () {\r\n\tdialogue(\"\", \"It's a red flash drive.\", globals.abandoned_usb_dialog_options);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 76",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "abandoned_computer_web_browsers": {
        "x1": 540,
        "y1": 61,
        "x2": 658,
        "y2": 167,
        "action": "function () {\r\n\tif (globals.abandoned_computer_infected) {\r\n\t\tglobals.abandoned_computer_temp_browser_bar = globals.browser_bar.text;\r\n\t\tglobals.abandoned_computer_temp_browser_bar_enabled = true;\r\n\t\tglobals.browser_bar.text = \"freephonesoftware.com\"\r\n\t\tchangeScene(globals.free_phone_software_web_page);\r\n\t}\r\n\telse {\r\n\t\tchangeScene(globals.web_browser);\r\n\t}\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 77",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "abandoned_computer_file_system": {
        "x1": 671,
        "y1": 161,
        "x2": 901,
        "y2": 354,
        "action": "function () {\r\n\tglobals.computer_file_system.buttons = globals.library_computer_file_system.getButtonList();\r\n\tchangeScene(globals.computer_file_system);\r\n}",
        "enabled": true,
        "text": "",
        "protect_text": false,
        "object_id": "Button 78",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "library_student1": {
        "img_no": 22,
        "buttons": [],
        "run_after_action": "function () {\r\n\tsay(globals.player_name, \"Do you have any papers due today?\", function () {\r\n\t\tsay(\"Glasses\", \"No. I'm just here to work on a programming project.\", function () {\r\n\t\t\tsay(\"Glasses\", \"What?! What the heck?! <Furious Banging on Keyboard>\", function () {\r\n\t\t\t\tvar temp = globals.browser_bar.text;\r\n\t\t\t\tglobals.browser_bar.text = \"freephonesoftware.com\";\r\n\t\t\t\tchangeScene(globals.free_phone_software_web_page);\r\n\t\t\t\tsay(\"Glasses\", \"ARGH! It's totally locked up! I don't have time for this!\", function () {\r\n\t\t\t\t\tsay(globals.player_name, \"What did you do to it?\", function () {\r\n\t\t\t\t\t\tsay(\"Glasses\", \"All I've done is login in a plugin in a USB drive, someone else must have messed with it\", function () {\r\n\t\t\t\t\t\t\tsay(globals.player_name, \"Where did you find it?\", function () {\r\n\t\t\t\t\t\t\t\tsay(\"Glasses\", \"It was right here on the table, in front of the computer.\", function () {\r\n\t\t\t\t\t\t\t\t\tsay(globals.partner_name, \"Can I have that? It might have caused the virus that just infected your computer. \" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  \"The autorun could be setup to automatically execute malware files.\", function () {\r\n\t\t\t\t\t\t\t\t\t\tsay(\"Glasses\", \"Sure, take it. I don't need it.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.library);\r\n\t\t\t\t\t\t\t\t\t\t\tglobals.browser_bar.text = temp;\r\n\t\t\t\t\t\t\t\t\t\t\tglobals.student1_button.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\tglobals.librarian_dialogue_options[globals.librarian_dialogue_options.length] = [\"The USB drive from Glasses.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"It's this USB drive. The kid with the glasses plugged it in to his computer and he was redirected to a suspicious website.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.library_score += 10;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdialogue(\"Librarian\", \"Great! Do you think you can fix or should I call the IT guys?\", [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\"Let me fix it!\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"Sure, I think I can fix it.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsay(\"Librarian\", \"Ok, then check out this computer. If you can't figure it out, that's okay.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.library_fixing_the_computer = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.computer_file_system.buttons = globals.infected_library_computer_file_system.getButtonList();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.computer_file_system);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\"Call in the IT Professionals\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsay(globals.player_name, \"I don't think I can fix it. Get the IT guys to do it.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsay(\"Librarian\", \"Ok, that's fine. Thanks for your help! You've done enough.\", function () {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tglobals.goToTheLibrary.setEnabled(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene:\"library\", score:globals.library_score });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplay_video('virusremoval');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}];\r\n\t\t\t\t\t\t\t\t\t\t\tglobals.library_have_flash_drive1 = true;\r\n\t\t\t\t\t\t\t\t\t\t\tif (globals.library_have_flash_drive1 && globals.library_have_flash_drive2) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tglobals.librarian_dialogue_options[globals.librarian_dialogue_options.length] = globals.librarian_dialogue_option_both_usbs;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n}",
        "object_id": "Scene 79",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "library_student2": {
        "img_no": 23,
        "buttons": [],
        "run_after_action": "function () {\r\n\tsay(globals.player_name, \"Do you know if there is anything wrong with this computer?\", function () {\r\n\t\tsay(\"Pale Yellow Shirt\", \"I'm pretty sure it's working fine. I haven't had any problems with it yet. I just got here though. I have a paper due tonight and I haven't started it yet. But if something strange happens while you are here, I'll let you know.\", function () {\r\n\t\t\tcloseDialogue();\r\n\t\t\tchangeScene(globals.library);\r\n\t\t\tglobals.student2_button.setEnabled(false);\r\n\t\t});\r\n\t});\r\n}",
        "object_id": "Scene 80",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "library_student3": {
        "img_no": 23,
        "buttons": [],
        "run_after_action": "function () {\r\n\tsay(globals.player_name, \"Have you been experiencing any difficulty with these computers?\", function () {\r\n\t\tsay(\"Red Shirt\", \"I don't think so. And I don't have time to check. I've been working all night on this paper! It's due at the start of class, in one hour.\", function () {\r\n\t\t\tsay(globals.player_name, \"Well hurry up and finish then, so I can check this computer.\", function () {\r\n\t\t\t\tsay(\"Red Shirt\", \"Believe me, I am working as fast as I can.\", function () {\r\n\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\tchangeScene(globals.library);\r\n\t\t\t\t\tglobals.student3_button.setEnabled(false);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n}",
        "object_id": "Scene 81",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "library_computer_file_system": {
        "current_directory": "Documents/Stuff",
        "files": [
            "Root",
            [
                "Documents",
                "hi.txt",
                [
                    "Stuff",
                    "bye.txt"
                ]
            ],
            [
                "Downloads"
            ]
        ],
        "object_id": "FileSystem 82",
        "cd": "function (directory) {\r\n\tif (directory == \"~\")\r\n\t\tthis.current_directory = \"\";\r\n\telse if (directory == \"..\") {\r\n\t\tfolders = this.current_directory.split('/');\r\n\t\tvar newFolders = []\r\n\t\tfor (var i = 0; i < folders.length - 1; i++)\r\n\t\t\tnewFolders[i] = folders[i];\r\n\t\tthis.current_directory = newFolders.join('/');\r\n\t} else {\r\n\t\tvar folders = directory.split('/');\r\n\t\tif (folders[0] == \"~\") {\r\n\t\t\tsearch_directory = \"\";\r\n\t\t\tnew_folders = []\r\n\t\t\tfor (var i = 1; i < folders.length; i++)\r\n\t\t\t\tnew_folders[new_folders.length] = folders[i];\r\n\t\t\tfolders = new_folders;\r\n\t\t} else {\r\n\t\t\tsearch_directory = this.current_directory;\r\n\t\t}\r\n\t\tfor (var i = 0; i < folders.length - 1; i++)\r\n\t\t\tsearch_directory = (search_directory == \"\" ? folders[i] : search_directory + '/' + folders[i]);\r\n\t\tif (this.folderExists(search_directory, folders[folders.length - 1])) {\r\n\t\t\tthis.current_directory = (search_directory == \"\" ? folders[folders.length - 1] : search_directory + '/' + folders[folders.length - 1]);\r\n\t\t}\r\n\t\telse\r\n\t\t\tprint(\"cd(\" + directory + \") failed!\");\r\n\t}\r\n}",
        "listCurrentDirectory": "function () {\r\n\tif (this.current_directory == \"\") {\r\n\t\tresult = [];\r\n\t\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\t\tif (this.isFolder(this.files[i]))\r\n\t\t\t\tresult[i - 1] = this.files[i][0];\r\n\t\t\telse\r\n\t\t\t\tresult[i - 1] = this.files[i];\r\n\t\t}\r\n\t\treturn result;\r\n\t} else {\r\n\t\tfolders = this.current_directory.split('/');\r\n\t\tcurrent = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == folders[i])\r\n\t\t\t\t\tnext = j;\t\r\n\t\t\t}\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tresult = [];\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]))\r\n\t\t\t\t\tresult[j - 1] = current[j][0];\r\n\t\t\t\telse\r\n\t\t\t\t\tresult[j - 1] = current[j];\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tprint(\"ListCurrentDirectory Failed!\");\r\n\t\t\treturn [\"FATAL ERROR\", \"Current Directory was invalid\", this.current_directory];\r\n\t\t}\r\n\t}\r\n}",
        "folderExists": "function (path, name) {\r\n\tif (path == \"\") {\r\n\t\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\t\tif (this.isFolder(this.files[i]) && this.files[i][0] == name)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == folders[i])\r\n\t\t\t\t\tnext = j;\t\r\n\t\t\t}\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tfor (var j = 1; j < current.length; j++)\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == name)\r\n\t\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t} else\r\n\t\t\treturn false;\r\n\t}\r\n}",
        "addFile": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tthis.files[this.files.length] = name;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If i == folders.length, then the path was traversed successfully\r\n\t\tif (i == folders.length)\r\n\t\t\tcurrent[current.length] = name;\r\n\t\telse\r\n\t\t\tprint(\"WARNING: addFile(\" + path + \", \" + name + \") failed!\");\r\n\t}\r\n}",
        "addFolder": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tthis.files[this.files.length] = [name];\r\n\t} else {\r\n\t\tfolders = path.split('/');\r\n\t\tcurrent = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If i == folders.length, then the path was traversed successfully\r\n\t\tif (i == folders.length)\r\n\t\t\tcurrent[current.length] = [name];\r\n\t\telse\r\n\t\t\tprint(\"WARNING: addFolder(\" + path + \", \" + name + \") failed!\");\r\n\t}\r\n}",
        "remove": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tvar temp = [this.files[0]]\r\n\t\tfor (var i = 1; i < this.files.length; i++)\r\n\t\t\tif (this.files[i][0] != name)\r\n\t\t\t\ttemp[temp.length] = this.files[i];\r\n\t\tthis.files = temp;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif ((this.isFolder(current[j]) && current[j][0] == name) || (current[j] == name)) {\r\n\t\t\t\t\tcurrent.splice(j, 1);\r\n\t\t\t\t\tj--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprint(\"WARNING: removeFile(\" + path + \", \" + name + \") failed\");\r\n\t\t}\r\n\t}\r\n}",
        "isFolder": "function(someObject) {\r\n\tif (Array.isArray) {\r\n\t\treturn Array.isArray(someObject) && someObject.length >= 1;\r\n\t} else {\r\n\t\treturn Object.prototype.toString.call(someObject) == Object.prototype.toString.call([]) && someObject.length >= 1;\r\n\t}\r\n}",
        "getButtonList": "function () {\r\n\tvar buttons = [];\r\n\t\r\n\tvar path_bar = new Button(10, 90, 10, 90, function () {} );\r\n\tpath_bar.text = this.current_directory;\r\n\tpath_bar.setEnabled(false);\r\n\tbuttons[buttons.length] = path_bar;\r\n\t\r\n\tvar current_filesystem = this;\r\n\t\r\n\tif (this.current_directory == \"\") {\r\n\t\tglobals.file_system_up_button.action = function () {};\r\n\t} else {\r\n\t\tglobals.file_system_up_button.action = function () {\r\n\t\t\tcurrent_filesystem.cd(\"..\");\r\n\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t};\r\n\t}\r\n\tbuttons[buttons.length] = globals.file_system_up_button;\r\n\t\r\n\tbuttons[buttons.length] = globals.file_system_x_button;\r\n\t\r\n\t\r\n\tvar ls = this.listCurrentDirectory();\r\n\tvar g = CANVAS_ELEMENT.getContext('2d');\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < ls.length; i++) {\r\n\t\tvar item_button = new Button (290, 140 + i*40, 290 + g.measureText(ls[i]).width, 175 + i*40, function () {\r\n\t\t\t// Scoping problem: i == ls.length here, not what it was when the button was created. Therefore, the buttons\r\n\t\t\t// text must be depended on to change directories\r\n\t\t\tif (current_filesystem.folderExists(current_filesystem.current_directory, this.text))\r\n\t\t\t\tcurrent_filesystem.cd(this.text);\r\n\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t});\r\n\t\titem_button.text = ls[i];\r\n\t\t\r\n\t\tvar remove_item_button = new Button(1100, 140 + i*40, 1100 + g.measureText(\"Delete?\").width, 175 + i*40, function () {\r\n\t\t\t// Same scoping problem as before, must find own index and subtract 1 to get text.\r\n\t\t\t// Also can add one to get whether its a File or Folder\r\n\t\t\tvar index_of_self = -1;\r\n\t\t\tfor (var i = 0; i < globals.current_scene.buttons.length; i++)\r\n\t\t\t\tif (globals.current_scene.buttons[i] == this)\r\n\t\t\t\t\tindex_of_self = i;\r\n\t\t\tif (index_of_self < 0) {\r\n\t\t\t\tprint(\"ERROR: remove_item_button could not find index of self\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar is_folder = globals.current_scene.buttons[index_of_self + 1].text == \"Folder\";\r\n\t\t\t\tvar message = \"Are you sure you want to remove the \" + (is_folder ? \"folder\" : \"file\") + \" \" + globals.current_scene.buttons[index_of_self - 1].text + (is_folder ? \" and all of its contents?\" : \"?\");\r\n\t\t\t\tdialogue(\"Remove File?\", message, [\r\n\t\t\t\t\t[\"Yes\", function () {\r\n\t\t\t\t\t\tcurrent_filesystem.remove(current_filesystem.current_directory, globals.current_scene.buttons[index_of_self - 1].text);\r\n\t\t\t\t\t\tvar file_removed = globals.current_scene.buttons[index_of_self -1].text;\r\n\t\t\t\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\t\t\t\t// Fixed the virus in the Library scene!\r\n\t\t\t\t\t\tif (current_filesystem == globals.infected_library_computer_file_system && file_removed == \"trojan.horse\") {\r\n\t\t\t\t\t\t\tsay(\"Librarian\", \"You did it! You fixed the computer! I can get the rest.\", function () {\r\n\t\t\t\t\t\t\t\tglobals.library_score += 10;\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\tglobals.goToTheLibrary.setEnabled(false);\r\n\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene:\"library\", score:globals.library_score });\r\n\t\t\t\t\t\t\t\tplay_video('virusremoval');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcloseDialogue(); // closeDialogue() will redraw automatically.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[\"No\", function () { \r\n\t\t\t\t\t\tcloseDialogue(); \r\n\t\t\t\t\t}]\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t});\r\n\t\tremove_item_button.text = \"Delete?\";\r\n\t\t\r\n\t\tvar item_type = new Button(1000, 140 + i*40, 1000, 175 + i*40, function () {});\r\n\t\titem_type.setEnabled(false);\r\n\t\titem_type.text = this.folderExists(this.current_directory, ls[i]) ? \"Folder\" : \"File\";\r\n\t\t\r\n\t\tif (!current_filesystem.folderExists(this.current_directory, ls[i]))\r\n\t\t\titem_button.setEnabled(false);\r\n\t\t\r\n\t\tbuttons[buttons.length] = item_button;\r\n\t\tbuttons[buttons.length] = remove_item_button;\r\n\t\tbuttons[buttons.length] = item_type;\r\n\t\t\r\n\t}\r\n\t\r\n\tvar home_button = new Button (10, 140, 10 + g.measureText(\"Home\").width, 175, function () {\r\n\t\tcurrent_filesystem.cd(\"~\");\r\n\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t});\r\n\thome_button.text = \"Home\";\r\n\t\r\n\tbuttons[buttons.length] = home_button;\r\n\t\r\n\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\tif (this.isFolder(this.files[i])) {\r\n\t\t\tvar item_button = new Button (10, 140 + i*40, 10 + g.measureText(this.files[i][0]).width, 175 + i*40, function () {\r\n\t\t\t\tif (current_filesystem.folderExists(\"\", this.text))\r\n\t\t\t\t\tcurrent_filesystem.cd(\"~/\" + this.text);\r\n\t\t\t\telse\r\n\t\t\t\t\tprint(\"ya goofed: Error in FileSystem.getButtonList()\");\r\n\t\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\titem_button.text = this.files[i][0];\r\n\t\t\t\r\n\t\t\tbuttons[buttons.length] = item_button;\r\n\t\t}\r\n\t}\r\n\r\n\treturn buttons;\r\n}"
    },
    "computer_file_system": {
        "img_no": 24,
        "buttons": [],
        "run_after_action": "function () {\r\n\tif (globals.phone_state != 0) changePhoneState(0);\r\n}",
        "object_id": "Scene 83",
        "draw": "function (g) {\r\n\tg.fillStyle = 'rgba(0,0,0,1)';\r\n\tg.font = \"30px Arial\";\r\n\tg.fillRect(0, 0, globals.MAX_X, globals.MAX_Y);\r\n\tg.drawImage(img_list[this.img_no],0,0);\r\n\tif (globals.phone_state == 1) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 50);\r\n\t}\r\n\telse if (globals.phone_state == 2) {\r\n\t\tg.drawImage(img_list[10], globals.MAX_X - 200, globals.MAX_Y - 400);\r\n\t\tg.drawImage(img_list[globals.phone_screen], globals.MAX_X - (200-13), globals.MAX_Y - (400-56));\r\n\t\tif (globals.phone_screen == 18)\r\n\t\t\tdrawEmailInbox(g);\r\n\t}\r\n\tg.font = \"11px Arial\"; // Switch font to draw phone buttons.\r\n\tfor (var i = 0; i < globals.persistent_buttons.length; i++) {\r\n\t\tif (globals.persistent_buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < globals.persistent_buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = globals.persistent_buttons[i].text;\r\n\t\t\tif (globals.activeTextField == globals.persistent_buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,globals.persistent_buttons[i].x1,globals.persistent_buttons[i].y2);\r\n\t\t}\r\n\t}\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < this.buttons.length; i++) {\r\n\t\tif (this.buttons[i].protect_text) {\r\n\t\t\tastricks = \"\";\r\n\t\t\tfor (var j = 0; j < this.buttons[i].text.length; j++)\r\n\t\t\t\tastricks += \"*\";\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\tastricks += \"|\";\r\n\t\t\tg.fillText(astricks,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext_to_draw = this.buttons[i].text;\r\n\t\t\tif (globals.activeTextField == this.buttons[i])\r\n\t\t\t\ttext_to_draw += \"|\";\r\n\t\t\tg.fillText(text_to_draw,this.buttons[i].x1,this.buttons[i].y2);\r\n\t\t}\r\n\t}\r\n}",
        "image": "function () {\r\n\treturn img_list[this.img_no];\r\n}",
        "addButton": "function (button) {\r\n\tthis.buttons[this.buttons.length] = button;\r\n}",
        "setRunAfterAction": "function (f) {\r\n\tthis.run_after_action = f;\r\n}"
    },
    "file_system_x_button": {
        "x1": 1180,
        "y1": 0,
        "x2": 1280,
        "y2": 100,
        "action": "function () {\r\n\tchangeScene(globals.previous_world_scene);\r\n\tif (globals.phone_state == 0)\r\n\t\tchangePhoneState(1);\r\n}",
        "enabled": true,
        "text": "Quit",
        "protect_text": false,
        "object_id": "Button 84",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "file_system_up_button": {
        "x1": 1130,
        "y1": 0,
        "x2": 1170,
        "y2": 100,
        "action": "function () {\r\n\r\n}",
        "enabled": true,
        "text": "Up",
        "protect_text": false,
        "object_id": "Button 85",
        "isWithinBounds": "function(x, y) {\r\n\treturn (this.enabled && this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);\r\n}",
        "doAction": "function() {\r\n\tthis.action();\r\n}",
        "reactToClickAt": "function(x, y) {\r\n\tif (this.isWithinBounds(x, y)) {\r\n\t\tthis.doAction();\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}",
        "setEnabled": "function(b) {\r\n\tthis.enabled = b;\r\n}"
    },
    "infected_library_computer_file_system": {
        "current_directory": "",
        "files": [
            "Root",
            [
                "Desktop"
            ],
            [
                "Documents",
                "HIST201 Paper.docx"
            ],
            [
                "Downloads",
                "vietnam_war_protest_poster.pdf",
                "lyndon_b_johnson_1964_campaign_speech.pdf"
            ],
            [
                "Pictures",
                [
                    "Sample Pictures",
                    "horses.jpg",
                    "lighthouse.jpg",
                    "penguins.jpg",
                    "tulips.jpg"
                ],
                "neon_cat.gif"
            ],
            [
                "Music",
                [
                    "Sample Music",
                    "Steal Away.mp3",
                    "Take the A-Train.mp3",
                    "Themes from the Unfinished Symphony.mp3"
                ]
            ],
            [
                "Videos",
                [
                    "Sample Videos",
                    "Wildlife.mpg"
                ]
            ],
            [
                "Computer",
                [
                    "Program Files",
                    [
                        "Microsoft Office",
                        "Word 2013.exe",
                        "Excel 2013.exe",
                        "Power Point 2013.exe",
                        "One Note 2013.exe"
                    ],
                    [
                        "Java",
                        [
                            "jre7",
                            "COPYRIGHT",
                            "LICENSE",
                            "readme.txt",
                            "javawr.jar",
                            "tools.jar",
                            "charsets.jar"
                        ]
                    ],
                    [
                        "Internet Explorer",
                        [
                            "Plugins",
                            "bingsearchbar.dll",
                            "adobePDFLinkHelper.dll",
                            "Java Plug-in SSV Helper.dll",
                            "trojan.horse"
                        ],
                        "ie10.exe"
                    ]
                ]
            ]
        ],
        "object_id": "FileSystem 86",
        "cd": "function (directory) {\r\n\tif (directory == \"~\")\r\n\t\tthis.current_directory = \"\";\r\n\telse if (directory == \"..\") {\r\n\t\tfolders = this.current_directory.split('/');\r\n\t\tvar newFolders = []\r\n\t\tfor (var i = 0; i < folders.length - 1; i++)\r\n\t\t\tnewFolders[i] = folders[i];\r\n\t\tthis.current_directory = newFolders.join('/');\r\n\t} else {\r\n\t\tvar folders = directory.split('/');\r\n\t\tif (folders[0] == \"~\") {\r\n\t\t\tsearch_directory = \"\";\r\n\t\t\tnew_folders = []\r\n\t\t\tfor (var i = 1; i < folders.length; i++)\r\n\t\t\t\tnew_folders[new_folders.length] = folders[i];\r\n\t\t\tfolders = new_folders;\r\n\t\t} else {\r\n\t\t\tsearch_directory = this.current_directory;\r\n\t\t}\r\n\t\tfor (var i = 0; i < folders.length - 1; i++)\r\n\t\t\tsearch_directory = (search_directory == \"\" ? folders[i] : search_directory + '/' + folders[i]);\r\n\t\tif (this.folderExists(search_directory, folders[folders.length - 1])) {\r\n\t\t\tthis.current_directory = (search_directory == \"\" ? folders[folders.length - 1] : search_directory + '/' + folders[folders.length - 1]);\r\n\t\t}\r\n\t\telse\r\n\t\t\tprint(\"cd(\" + directory + \") failed!\");\r\n\t}\r\n}",
        "listCurrentDirectory": "function () {\r\n\tif (this.current_directory == \"\") {\r\n\t\tresult = [];\r\n\t\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\t\tif (this.isFolder(this.files[i]))\r\n\t\t\t\tresult[i - 1] = this.files[i][0];\r\n\t\t\telse\r\n\t\t\t\tresult[i - 1] = this.files[i];\r\n\t\t}\r\n\t\treturn result;\r\n\t} else {\r\n\t\tfolders = this.current_directory.split('/');\r\n\t\tcurrent = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == folders[i])\r\n\t\t\t\t\tnext = j;\t\r\n\t\t\t}\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tresult = [];\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]))\r\n\t\t\t\t\tresult[j - 1] = current[j][0];\r\n\t\t\t\telse\r\n\t\t\t\t\tresult[j - 1] = current[j];\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tprint(\"ListCurrentDirectory Failed!\");\r\n\t\t\treturn [\"FATAL ERROR\", \"Current Directory was invalid\", this.current_directory];\r\n\t\t}\r\n\t}\r\n}",
        "folderExists": "function (path, name) {\r\n\tif (path == \"\") {\r\n\t\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\t\tif (this.isFolder(this.files[i]) && this.files[i][0] == name)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == folders[i])\r\n\t\t\t\t\tnext = j;\t\r\n\t\t\t}\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tfor (var j = 1; j < current.length; j++)\r\n\t\t\t\tif (this.isFolder(current[j]) && current[j][0] == name)\r\n\t\t\t\t\treturn true;\r\n\t\t\treturn false;\r\n\t\t} else\r\n\t\t\treturn false;\r\n\t}\r\n}",
        "addFile": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tthis.files[this.files.length] = name;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If i == folders.length, then the path was traversed successfully\r\n\t\tif (i == folders.length)\r\n\t\t\tcurrent[current.length] = name;\r\n\t\telse\r\n\t\t\tprint(\"WARNING: addFile(\" + path + \", \" + name + \") failed!\");\r\n\t}\r\n}",
        "addFolder": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tthis.files[this.files.length] = [name];\r\n\t} else {\r\n\t\tfolders = path.split('/');\r\n\t\tcurrent = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If i == folders.length, then the path was traversed successfully\r\n\t\tif (i == folders.length)\r\n\t\t\tcurrent[current.length] = [name];\r\n\t\telse\r\n\t\t\tprint(\"WARNING: addFolder(\" + path + \", \" + name + \") failed!\");\r\n\t}\r\n}",
        "remove": "function(path, name) {\r\n\tif (path == \"\") {\r\n\t\tvar temp = [this.files[0]]\r\n\t\tfor (var i = 1; i < this.files.length; i++)\r\n\t\t\tif (this.files[i][0] != name)\r\n\t\t\t\ttemp[temp.length] = this.files[i];\r\n\t\tthis.files = temp;\r\n\t} else {\r\n\t\tvar folders = path.split('/');\r\n\t\tvar current = this.files;\r\n\t\tvar i = 0;\r\n\t\tvar next = 0;\r\n\t\twhile (i < folders.length && next != -1) {\r\n\t\t\tnext = -1;\r\n\t\t\tfor (var j = 1; j < current.length; j++) \r\n\t\t\t\tif (this.isFolder(current[j]) && folders[i] == current[j][0]) \r\n\t\t\t\t\tnext = j;\r\n\t\t\tif (next != -1) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcurrent = current[next];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (i == folders.length) {\r\n\t\t\tfor (var j = 1; j < current.length; j++) {\r\n\t\t\t\tif ((this.isFolder(current[j]) && current[j][0] == name) || (current[j] == name)) {\r\n\t\t\t\t\tcurrent.splice(j, 1);\r\n\t\t\t\t\tj--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tprint(\"WARNING: removeFile(\" + path + \", \" + name + \") failed\");\r\n\t\t}\r\n\t}\r\n}",
        "isFolder": "function(someObject) {\r\n\tif (Array.isArray) {\r\n\t\treturn Array.isArray(someObject) && someObject.length >= 1;\r\n\t} else {\r\n\t\treturn Object.prototype.toString.call(someObject) == Object.prototype.toString.call([]) && someObject.length >= 1;\r\n\t}\r\n}",
        "getButtonList": "function () {\r\n\tvar buttons = [];\r\n\t\r\n\tvar path_bar = new Button(10, 90, 10, 90, function () {} );\r\n\tpath_bar.text = this.current_directory;\r\n\tpath_bar.setEnabled(false);\r\n\tbuttons[buttons.length] = path_bar;\r\n\t\r\n\tvar current_filesystem = this;\r\n\t\r\n\tif (this.current_directory == \"\") {\r\n\t\tglobals.file_system_up_button.action = function () {};\r\n\t} else {\r\n\t\tglobals.file_system_up_button.action = function () {\r\n\t\t\tcurrent_filesystem.cd(\"..\");\r\n\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t};\r\n\t}\r\n\tbuttons[buttons.length] = globals.file_system_up_button;\r\n\t\r\n\tbuttons[buttons.length] = globals.file_system_x_button;\r\n\t\r\n\t\r\n\tvar ls = this.listCurrentDirectory();\r\n\tvar g = CANVAS_ELEMENT.getContext('2d');\r\n\tg.font = \"30px Arial\";\r\n\tfor (var i = 0; i < ls.length; i++) {\r\n\t\tvar item_button = new Button (290, 140 + i*40, 290 + g.measureText(ls[i]).width, 175 + i*40, function () {\r\n\t\t\t// Scoping problem: i == ls.length here, not what it was when the button was created. Therefore, the buttons\r\n\t\t\t// text must be depended on to change directories\r\n\t\t\tif (current_filesystem.folderExists(current_filesystem.current_directory, this.text))\r\n\t\t\t\tcurrent_filesystem.cd(this.text);\r\n\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t});\r\n\t\titem_button.text = ls[i];\r\n\t\t\r\n\t\tvar remove_item_button = new Button(1100, 140 + i*40, 1100 + g.measureText(\"Delete?\").width, 175 + i*40, function () {\r\n\t\t\t// Same scoping problem as before, must find own index and subtract 1 to get text.\r\n\t\t\t// Also can add one to get whether its a File or Folder\r\n\t\t\tvar index_of_self = -1;\r\n\t\t\tfor (var i = 0; i < globals.current_scene.buttons.length; i++)\r\n\t\t\t\tif (globals.current_scene.buttons[i] == this)\r\n\t\t\t\t\tindex_of_self = i;\r\n\t\t\tif (index_of_self < 0) {\r\n\t\t\t\tprint(\"ERROR: remove_item_button could not find index of self\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar is_folder = globals.current_scene.buttons[index_of_self + 1].text == \"Folder\";\r\n\t\t\t\tvar message = \"Are you sure you want to remove the \" + (is_folder ? \"folder\" : \"file\") + \" \" + globals.current_scene.buttons[index_of_self - 1].text + (is_folder ? \" and all of its contents?\" : \"?\");\r\n\t\t\t\tdialogue(\"Remove File?\", message, [\r\n\t\t\t\t\t[\"Yes\", function () {\r\n\t\t\t\t\t\tcurrent_filesystem.remove(current_filesystem.current_directory, globals.current_scene.buttons[index_of_self - 1].text);\r\n\t\t\t\t\t\tvar file_removed = globals.current_scene.buttons[index_of_self -1].text;\r\n\t\t\t\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\t\t\t\t// Fixed the virus in the Library scene!\r\n\t\t\t\t\t\tif (current_filesystem == globals.infected_library_computer_file_system && file_removed == \"trojan.horse\") {\r\n\t\t\t\t\t\t\tsay(\"Librarian\", \"You did it! You fixed the computer! I can get the rest.\", function () {\r\n\t\t\t\t\t\t\t\tglobals.library_score += 10;\r\n\t\t\t\t\t\t\t\tcloseDialogue();\r\n\t\t\t\t\t\t\t\tglobals.goToTheLibrary.setEnabled(false);\r\n\t\t\t\t\t\t\t\tchangeScene(globals.start);\r\n\t\t\t\t\t\t\t\tsocket.emit('scene_complete', { scene:\"library\", score:globals.library_score });\r\n\t\t\t\t\t\t\t\tplay_video('virusremoval');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcloseDialogue(); // closeDialogue() will redraw automatically.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[\"No\", function () { \r\n\t\t\t\t\t\tcloseDialogue(); \r\n\t\t\t\t\t}]\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t});\r\n\t\tremove_item_button.text = \"Delete?\";\r\n\t\t\r\n\t\tvar item_type = new Button(1000, 140 + i*40, 1000, 175 + i*40, function () {});\r\n\t\titem_type.setEnabled(false);\r\n\t\titem_type.text = this.folderExists(this.current_directory, ls[i]) ? \"Folder\" : \"File\";\r\n\t\t\r\n\t\tif (!current_filesystem.folderExists(this.current_directory, ls[i]))\r\n\t\t\titem_button.setEnabled(false);\r\n\t\t\r\n\t\tbuttons[buttons.length] = item_button;\r\n\t\tbuttons[buttons.length] = remove_item_button;\r\n\t\tbuttons[buttons.length] = item_type;\r\n\t\t\r\n\t}\r\n\t\r\n\tvar home_button = new Button (10, 140, 10 + g.measureText(\"Home\").width, 175, function () {\r\n\t\tcurrent_filesystem.cd(\"~\");\r\n\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t});\r\n\thome_button.text = \"Home\";\r\n\t\r\n\tbuttons[buttons.length] = home_button;\r\n\t\r\n\tfor (var i = 1; i < this.files.length; i++) {\r\n\t\tif (this.isFolder(this.files[i])) {\r\n\t\t\tvar item_button = new Button (10, 140 + i*40, 10 + g.measureText(this.files[i][0]).width, 175 + i*40, function () {\r\n\t\t\t\tif (current_filesystem.folderExists(\"\", this.text))\r\n\t\t\t\t\tcurrent_filesystem.cd(\"~/\" + this.text);\r\n\t\t\t\telse\r\n\t\t\t\t\tprint(\"ya goofed: Error in FileSystem.getButtonList()\");\r\n\t\t\t\tglobals.computer_file_system.buttons = current_filesystem.getButtonList();\r\n\t\t\t\tglobals.current_scene.draw(CANVAS_ELEMENT.getContext('2d'));\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\titem_button.text = this.files[i][0];\r\n\t\t\t\r\n\t\t\tbuttons[buttons.length] = item_button;\r\n\t\t}\r\n\t}\r\n\r\n\treturn buttons;\r\n}"
    },
    "last_dialog_name": "Ashley",
    "last_dialog_text": "Let's speak to the manager and let her know we are here. She's behind the counter.",
    "last_dialog_responses": [
        [
            "Okay.",
            "function () { \r\n\t\t\tglobals.entry_message_shown = true; \r\n\t\t\tcloseDialogue(); \r\n\t\t\t// Delaying adding the buttons until after the entry message is shown. This prevents people from skipping it by double clicking \r\n\t\t\t// on the \"Go to the Coffee Shop button\", which triggers the top hat's dialogue, because they are in the same position on the screen.\r\n\t\t\tglobals.coffee_shop.addButton(globals.manager);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.witness3);\r\n\t\t\tglobals.coffee_shop.addButton(globals.tophat);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect1);\r\n\t\t\tglobals.coffee_shop.addButton(globals.suspect2);\r\n\t\t\tglobals.coffee_shop.addButton(globals.culprit);\r\n\t\t}"
        ]
    ],
    "sequence_no": 18,
    "next_object_id": 99
}